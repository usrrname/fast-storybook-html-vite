{"version":3,"file":"helpers-9427b1f1.js","sources":["../../node_modules/@microsoft/fast-element/dist/esm/interfaces.js","../../node_modules/@microsoft/fast-element/dist/esm/polyfills.js","../../node_modules/@microsoft/fast-element/dist/esm/platform.js","../../node_modules/@microsoft/fast-element/dist/esm/dom.js","../../node_modules/@microsoft/fast-element/dist/esm/observation/update-queue.js","../../node_modules/@microsoft/fast-element/dist/esm/observation/notifier.js","../../node_modules/@microsoft/fast-element/dist/esm/observation/observable.js","../../node_modules/@microsoft/fast-element/dist/esm/binding/binding.js","../../node_modules/@microsoft/fast-element/dist/esm/binding/one-way.js","../../node_modules/@microsoft/fast-element/dist/esm/binding/one-time.js","../../node_modules/@microsoft/fast-element/dist/esm/styles/element-styles.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/markup.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/html-directive.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/html-binding-directive.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/view.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/compiler.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/template.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/ref.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/node-observation.js","../../node_modules/@microsoft/fast-element/dist/esm/templating/slotted.js","../../node_modules/@microsoft/fast-element/dist/esm/components/attributes.js","../../node_modules/@microsoft/fast-element/dist/esm/components/fast-definitions.js","../../node_modules/@microsoft/fast-element/dist/esm/components/element-controller.js","../../node_modules/@microsoft/fast-element/dist/esm/components/fast-element.js","../../node_modules/@microsoft/fast-foundation/dist/esm/utilities/template-helpers.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/@microsoft/fast-foundation/dist/esm/patterns/aria-global.js","../../node_modules/@microsoft/fast-foundation/dist/esm/patterns/start-end.js","../../node_modules/@microsoft/fast-web-utilities/dist/key-codes.js","../../node_modules/@microsoft/fast-foundation/dist/esm/utilities/apply-mixins.js","../../node_modules/@microsoft/fast-foundation/dist/esm/form-associated/form-associated.js","../../node_modules/has-symbols/shams.js","../../node_modules/has-symbols/index.js","../../node_modules/function-bind/implementation.js","../../node_modules/function-bind/index.js","../../node_modules/has/src/index.js","../../node_modules/get-intrinsic/index.js","../../node_modules/call-bind/index.js","../../node_modules/call-bind/callBound.js","../../node_modules/side-channel/index.js","../../node_modules/qs/lib/utils.js","../../src/__test__/helpers.ts"],"sourcesContent":["let kernelMode;\nconst kernelAttr = \"fast-kernel\";\ntry {\n    if (document.currentScript) {\n        kernelMode = document.currentScript.getAttribute(kernelAttr);\n    }\n    else {\n        const scripts = document.getElementsByTagName(\"script\");\n        const currentScript = scripts[scripts.length - 1];\n        kernelMode = currentScript.getAttribute(kernelAttr);\n    }\n}\ncatch (e) {\n    kernelMode = \"isolate\";\n}\nlet KernelServiceId;\nswitch (kernelMode) {\n    case \"share\": // share the kernel across major versions\n        KernelServiceId = Object.freeze({\n            updateQueue: 1,\n            observable: 2,\n            contextEvent: 3,\n            elementRegistry: 4,\n        });\n        break;\n    case \"share-v2\": // only share the kernel with other v2 instances\n        KernelServiceId = Object.freeze({\n            updateQueue: 1.2,\n            observable: 2.2,\n            contextEvent: 3.2,\n            elementRegistry: 4.2,\n        });\n        break;\n    default:\n        // fully isolate the kernel from all other FAST instances\n        const postfix = `-${Math.random().toString(36).substring(2, 8)}`;\n        KernelServiceId = Object.freeze({\n            updateQueue: `1.2${postfix}`,\n            observable: `2.2${postfix}`,\n            contextEvent: `3.2${postfix}`,\n            elementRegistry: `4.2${postfix}`,\n        });\n        break;\n}\nexport { KernelServiceId };\n/**\n * Determines whether or not an object is a function.\n * @public\n */\nexport const isFunction = (object) => typeof object === \"function\";\n/**\n * Determines whether or not an object is a string.\n * @public\n */\nexport const isString = (object) => typeof object === \"string\";\n/**\n * A function which does nothing.\n * @public\n */\nexport const noop = () => void 0;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n(function ensureGlobalThis() {\n    if (typeof globalThis !== \"undefined\") {\n        // We're running in a modern environment.\n        return;\n    }\n    // @ts-ignore\n    if (typeof global !== \"undefined\") {\n        // We're running in NodeJS\n        // @ts-ignore\n        global.globalThis = global;\n    }\n    else if (typeof self !== \"undefined\") {\n        self.globalThis = self;\n    }\n    else if (typeof window !== \"undefined\") {\n        // We're running in the browser's main thread.\n        window.globalThis = window;\n    }\n    else {\n        // Hopefully we never get here...\n        // Not all environments allow eval and Function. Use only as a last resort:\n        // eslint-disable-next-line no-new-func\n        const result = new Function(\"return this\")();\n        result.globalThis = result;\n    }\n})();\n","import { noop } from \"./interfaces.js\";\nimport \"./polyfills.js\";\n// ensure FAST global - duplicated debug.ts\nconst propConfig = {\n    configurable: false,\n    enumerable: false,\n    writable: false,\n};\nif (globalThis.FAST === void 0) {\n    Reflect.defineProperty(globalThis, \"FAST\", Object.assign({ value: Object.create(null) }, propConfig));\n}\n/**\n * The FAST global.\n * @public\n */\nexport const FAST = globalThis.FAST;\nif (FAST.getById === void 0) {\n    const storage = Object.create(null);\n    Reflect.defineProperty(FAST, \"getById\", Object.assign({ value(id, initialize) {\n            let found = storage[id];\n            if (found === void 0) {\n                found = initialize ? (storage[id] = initialize()) : null;\n            }\n            return found;\n        } }, propConfig));\n}\nif (FAST.error === void 0) {\n    Object.assign(FAST, {\n        warn() { },\n        error(code) {\n            return new Error(`Error ${code}`);\n        },\n        addMessages() { },\n    });\n}\n/**\n * A readonly, empty array.\n * @remarks\n * Typically returned by APIs that return arrays when there are\n * no actual items to return.\n * @public\n */\nexport const emptyArray = Object.freeze([]);\n/**\n * Do not change. Part of shared kernel contract.\n * @internal\n */\nexport function createTypeRegistry() {\n    const typeToDefinition = new Map();\n    return Object.freeze({\n        register(definition) {\n            if (typeToDefinition.has(definition.type)) {\n                return false;\n            }\n            typeToDefinition.set(definition.type, definition);\n            return true;\n        },\n        getByType(key) {\n            return typeToDefinition.get(key);\n        },\n        getForInstance(object) {\n            if (object === null || object === void 0) {\n                return void 0;\n            }\n            return typeToDefinition.get(object.constructor);\n        },\n    });\n}\n/**\n * Creates a function capable of locating metadata associated with a type.\n * @returns A metadata locator function.\n * @internal\n */\nexport function createMetadataLocator() {\n    const metadataLookup = new WeakMap();\n    return function (target) {\n        let metadata = metadataLookup.get(target);\n        if (metadata === void 0) {\n            let currentTarget = Reflect.getPrototypeOf(target);\n            while (metadata === void 0 && currentTarget !== null) {\n                metadata = metadataLookup.get(currentTarget);\n                currentTarget = Reflect.getPrototypeOf(currentTarget);\n            }\n            metadata = metadata === void 0 ? [] : metadata.slice(0);\n            metadataLookup.set(target, metadata);\n        }\n        return metadata;\n    };\n}\n/**\n * Makes a type noop for JSON serialization.\n * @param type - The type to make noop for JSON serialization.\n * @internal\n */\nexport function makeSerializationNoop(type) {\n    type.prototype.toJSON = noop;\n}\n","import \"./interfaces.js\";\nimport { FAST } from \"./platform.js\";\n/**\n * The type of HTML aspect to target.\n * @public\n */\nexport const DOMAspect = Object.freeze({\n    /**\n     * Not aspected.\n     */\n    none: 0,\n    /**\n     * An attribute.\n     */\n    attribute: 1,\n    /**\n     * A boolean attribute.\n     */\n    booleanAttribute: 2,\n    /**\n     * A property.\n     */\n    property: 3,\n    /**\n     * Content\n     */\n    content: 4,\n    /**\n     * A token list.\n     */\n    tokenList: 5,\n    /**\n     * An event.\n     */\n    event: 6,\n});\nconst createHTML = html => html;\nconst fastTrustedType = globalThis.trustedTypes\n    ? globalThis.trustedTypes.createPolicy(\"fast-html\", { createHTML })\n    : { createHTML };\nlet defaultPolicy = Object.freeze({\n    createHTML(value) {\n        return fastTrustedType.createHTML(value);\n    },\n    protect(tagName, aspect, aspectName, sink) {\n        return sink;\n    },\n});\nconst fastPolicy = defaultPolicy;\n/**\n * Common DOM APIs.\n * @public\n */\nexport const DOM = Object.freeze({\n    /**\n     * Gets the dom policy used by the templating system.\n     */\n    get policy() {\n        return defaultPolicy;\n    },\n    /**\n     * Sets the dom policy used by the templating system.\n     * @param policy - The policy to set.\n     * @remarks\n     * This API can only be called once, for security reasons. It should be\n     * called by the application developer at the start of their program.\n     */\n    setPolicy(value) {\n        if (defaultPolicy !== fastPolicy) {\n            throw FAST.error(1201 /* Message.onlySetDOMPolicyOnce */);\n        }\n        defaultPolicy = value;\n    },\n    /**\n     * Sets an attribute value on an element.\n     * @param element - The element to set the attribute value on.\n     * @param attributeName - The attribute name to set.\n     * @param value - The value of the attribute to set.\n     * @remarks\n     * If the value is `null` or `undefined`, the attribute is removed, otherwise\n     * it is set to the provided value using the standard `setAttribute` API.\n     */\n    setAttribute(element, attributeName, value) {\n        value === null || value === undefined\n            ? element.removeAttribute(attributeName)\n            : element.setAttribute(attributeName, value);\n    },\n    /**\n     * Sets a boolean attribute value.\n     * @param element - The element to set the boolean attribute value on.\n     * @param attributeName - The attribute name to set.\n     * @param value - The value of the attribute to set.\n     * @remarks\n     * If the value is true, the attribute is added; otherwise it is removed.\n     */\n    setBooleanAttribute(element, attributeName, value) {\n        value\n            ? element.setAttribute(attributeName, \"\")\n            : element.removeAttribute(attributeName);\n    },\n});\n","import { KernelServiceId } from \"../interfaces.js\";\nimport { FAST } from \"../platform.js\";\n/**\n * The default UpdateQueue.\n * @public\n */\nexport const Updates = FAST.getById(KernelServiceId.updateQueue, () => {\n    const tasks = [];\n    const pendingErrors = [];\n    const rAF = globalThis.requestAnimationFrame;\n    let updateAsync = true;\n    function throwFirstError() {\n        if (pendingErrors.length) {\n            throw pendingErrors.shift();\n        }\n    }\n    function tryRunTask(task) {\n        try {\n            task.call();\n        }\n        catch (error) {\n            if (updateAsync) {\n                pendingErrors.push(error);\n                setTimeout(throwFirstError, 0);\n            }\n            else {\n                tasks.length = 0;\n                throw error;\n            }\n        }\n    }\n    function process() {\n        const capacity = 1024;\n        let index = 0;\n        while (index < tasks.length) {\n            tryRunTask(tasks[index]);\n            index++;\n            // Prevent leaking memory for long chains of recursive calls to `enqueue`.\n            // If we call `enqueue` within a task scheduled by `enqueue`, the queue will\n            // grow, but to avoid an O(n) walk for every task we execute, we don't\n            // shift tasks off the queue after they have been executed.\n            // Instead, we periodically shift 1024 tasks off the queue.\n            if (index > capacity) {\n                // Manually shift all values starting at the index back to the\n                // beginning of the queue.\n                for (let scan = 0, newLength = tasks.length - index; scan < newLength; scan++) {\n                    tasks[scan] = tasks[scan + index];\n                }\n                tasks.length -= index;\n                index = 0;\n            }\n        }\n        tasks.length = 0;\n    }\n    function enqueue(callable) {\n        tasks.push(callable);\n        if (tasks.length < 2) {\n            updateAsync ? rAF(process) : process();\n        }\n    }\n    return Object.freeze({\n        enqueue,\n        next: () => new Promise(enqueue),\n        process,\n        setMode: (isAsync) => (updateAsync = isAsync),\n    });\n});\n","/**\n * An implementation of {@link Notifier} that efficiently keeps track of\n * subscribers interested in a specific change notification on an\n * observable subject.\n *\n * @remarks\n * This set is optimized for the most common scenario of 1 or 2 subscribers.\n * With this in mind, it can store a subscriber in an internal field, allowing it to avoid Array#push operations.\n * If the set ever exceeds two subscribers, it upgrades to an array automatically.\n * @public\n */\nexport class SubscriberSet {\n    /**\n     * Creates an instance of SubscriberSet for the specified subject.\n     * @param subject - The subject that subscribers will receive notifications from.\n     * @param initialSubscriber - An initial subscriber to changes.\n     */\n    constructor(subject, initialSubscriber) {\n        this.sub1 = void 0;\n        this.sub2 = void 0;\n        this.spillover = void 0;\n        this.subject = subject;\n        this.sub1 = initialSubscriber;\n    }\n    /**\n     * Checks whether the provided subscriber has been added to this set.\n     * @param subscriber - The subscriber to test for inclusion in this set.\n     */\n    has(subscriber) {\n        return this.spillover === void 0\n            ? this.sub1 === subscriber || this.sub2 === subscriber\n            : this.spillover.indexOf(subscriber) !== -1;\n    }\n    /**\n     * Subscribes to notification of changes in an object's state.\n     * @param subscriber - The object that is subscribing for change notification.\n     */\n    subscribe(subscriber) {\n        const spillover = this.spillover;\n        if (spillover === void 0) {\n            if (this.has(subscriber)) {\n                return;\n            }\n            if (this.sub1 === void 0) {\n                this.sub1 = subscriber;\n                return;\n            }\n            if (this.sub2 === void 0) {\n                this.sub2 = subscriber;\n                return;\n            }\n            this.spillover = [this.sub1, this.sub2, subscriber];\n            this.sub1 = void 0;\n            this.sub2 = void 0;\n        }\n        else {\n            const index = spillover.indexOf(subscriber);\n            if (index === -1) {\n                spillover.push(subscriber);\n            }\n        }\n    }\n    /**\n     * Unsubscribes from notification of changes in an object's state.\n     * @param subscriber - The object that is unsubscribing from change notification.\n     */\n    unsubscribe(subscriber) {\n        const spillover = this.spillover;\n        if (spillover === void 0) {\n            if (this.sub1 === subscriber) {\n                this.sub1 = void 0;\n            }\n            else if (this.sub2 === subscriber) {\n                this.sub2 = void 0;\n            }\n        }\n        else {\n            const index = spillover.indexOf(subscriber);\n            if (index !== -1) {\n                spillover.splice(index, 1);\n            }\n        }\n    }\n    /**\n     * Notifies all subscribers.\n     * @param args - Data passed along to subscribers during notification.\n     */\n    notify(args) {\n        const spillover = this.spillover;\n        const subject = this.subject;\n        if (spillover === void 0) {\n            const sub1 = this.sub1;\n            const sub2 = this.sub2;\n            if (sub1 !== void 0) {\n                sub1.handleChange(subject, args);\n            }\n            if (sub2 !== void 0) {\n                sub2.handleChange(subject, args);\n            }\n        }\n        else {\n            for (let i = 0, ii = spillover.length; i < ii; ++i) {\n                spillover[i].handleChange(subject, args);\n            }\n        }\n    }\n}\n/**\n * An implementation of Notifier that allows subscribers to be notified\n * of individual property changes on an object.\n * @public\n */\nexport class PropertyChangeNotifier {\n    /**\n     * Creates an instance of PropertyChangeNotifier for the specified subject.\n     * @param subject - The object that subscribers will receive notifications for.\n     */\n    constructor(subject) {\n        this.subscribers = {};\n        this.subjectSubscribers = null;\n        this.subject = subject;\n    }\n    /**\n     * Notifies all subscribers, based on the specified property.\n     * @param propertyName - The property name, passed along to subscribers during notification.\n     */\n    notify(propertyName) {\n        var _a, _b;\n        (_a = this.subscribers[propertyName]) === null || _a === void 0 ? void 0 : _a.notify(propertyName);\n        (_b = this.subjectSubscribers) === null || _b === void 0 ? void 0 : _b.notify(propertyName);\n    }\n    /**\n     * Subscribes to notification of changes in an object's state.\n     * @param subscriber - The object that is subscribing for change notification.\n     * @param propertyToWatch - The name of the property that the subscriber is interested in watching for changes.\n     */\n    subscribe(subscriber, propertyToWatch) {\n        var _a, _b;\n        let subscribers;\n        if (propertyToWatch) {\n            subscribers =\n                (_a = this.subscribers[propertyToWatch]) !== null && _a !== void 0 ? _a : (this.subscribers[propertyToWatch] = new SubscriberSet(this.subject));\n        }\n        else {\n            subscribers =\n                (_b = this.subjectSubscribers) !== null && _b !== void 0 ? _b : (this.subjectSubscribers = new SubscriberSet(this.subject));\n        }\n        subscribers.subscribe(subscriber);\n    }\n    /**\n     * Unsubscribes from notification of changes in an object's state.\n     * @param subscriber - The object that is unsubscribing from change notification.\n     * @param propertyToUnwatch - The name of the property that the subscriber is no longer interested in watching.\n     */\n    unsubscribe(subscriber, propertyToUnwatch) {\n        var _a, _b;\n        if (propertyToUnwatch) {\n            (_a = this.subscribers[propertyToUnwatch]) === null || _a === void 0 ? void 0 : _a.unsubscribe(subscriber);\n        }\n        else {\n            (_b = this.subjectSubscribers) === null || _b === void 0 ? void 0 : _b.unsubscribe(subscriber);\n        }\n    }\n}\n","import { isFunction, isString, KernelServiceId, } from \"../interfaces.js\";\nimport { createMetadataLocator, FAST, makeSerializationNoop } from \"../platform.js\";\nimport { Updates } from \"./update-queue.js\";\nimport { PropertyChangeNotifier, SubscriberSet } from \"./notifier.js\";\n/**\n * Describes how the source's lifetime relates to its controller's lifetime.\n * @public\n */\nexport const SourceLifetime = Object.freeze({\n    /**\n     * The source to controller lifetime relationship is unknown.\n     */\n    unknown: void 0,\n    /**\n     * The source and controller lifetimes are coupled to one another.\n     * They can/will be GC'd together.\n     */\n    coupled: 1,\n});\n/**\n * Common Observable APIs.\n * @public\n */\nexport const Observable = FAST.getById(KernelServiceId.observable, () => {\n    const queueUpdate = Updates.enqueue;\n    const volatileRegex = /(:|&&|\\|\\||if)/;\n    const notifierLookup = new WeakMap();\n    let watcher = void 0;\n    let createArrayObserver = (array) => {\n        throw FAST.error(1101 /* Message.needsArrayObservation */);\n    };\n    function getNotifier(source) {\n        var _a;\n        let found = (_a = source.$fastController) !== null && _a !== void 0 ? _a : notifierLookup.get(source);\n        if (found === void 0) {\n            Array.isArray(source)\n                ? (found = createArrayObserver(source))\n                : notifierLookup.set(source, (found = new PropertyChangeNotifier(source)));\n        }\n        return found;\n    }\n    const getAccessors = createMetadataLocator();\n    class DefaultObservableAccessor {\n        constructor(name) {\n            this.name = name;\n            this.field = `_${name}`;\n            this.callback = `${name}Changed`;\n        }\n        getValue(source) {\n            if (watcher !== void 0) {\n                watcher.watch(source, this.name);\n            }\n            return source[this.field];\n        }\n        setValue(source, newValue) {\n            const field = this.field;\n            const oldValue = source[field];\n            if (oldValue !== newValue) {\n                source[field] = newValue;\n                const callback = source[this.callback];\n                if (isFunction(callback)) {\n                    callback.call(source, oldValue, newValue);\n                }\n                getNotifier(source).notify(this.name);\n            }\n        }\n    }\n    class ExpressionNotifierImplementation extends SubscriberSet {\n        constructor(expression, initialSubscriber, isVolatileBinding = false) {\n            super(expression, initialSubscriber);\n            this.expression = expression;\n            this.isVolatileBinding = isVolatileBinding;\n            this.needsRefresh = true;\n            this.needsQueue = true;\n            this.isAsync = true;\n            this.first = this;\n            this.last = null;\n            this.propertySource = void 0;\n            this.propertyName = void 0;\n            this.notifier = void 0;\n            this.next = void 0;\n        }\n        setMode(isAsync) {\n            this.isAsync = this.needsQueue = isAsync;\n        }\n        bind(controller) {\n            this.controller = controller;\n            const value = this.observe(controller.source, controller.context);\n            if (!controller.isBound && this.requiresUnbind(controller)) {\n                controller.onUnbind(this);\n            }\n            return value;\n        }\n        requiresUnbind(controller) {\n            return (controller.sourceLifetime !== SourceLifetime.coupled ||\n                this.first !== this.last ||\n                this.first.propertySource !== controller.source);\n        }\n        unbind(controller) {\n            this.dispose();\n        }\n        observe(source, context) {\n            if (this.needsRefresh && this.last !== null) {\n                this.dispose();\n            }\n            const previousWatcher = watcher;\n            watcher = this.needsRefresh ? this : void 0;\n            this.needsRefresh = this.isVolatileBinding;\n            let result;\n            try {\n                result = this.expression(source, context);\n            }\n            finally {\n                watcher = previousWatcher;\n            }\n            return result;\n        }\n        // backwards compat with v1 kernel\n        disconnect() {\n            this.dispose();\n        }\n        dispose() {\n            if (this.last !== null) {\n                let current = this.first;\n                while (current !== void 0) {\n                    current.notifier.unsubscribe(this, current.propertyName);\n                    current = current.next;\n                }\n                this.last = null;\n                this.needsRefresh = this.needsQueue = this.isAsync;\n            }\n        }\n        watch(propertySource, propertyName) {\n            const prev = this.last;\n            const notifier = getNotifier(propertySource);\n            const current = prev === null ? this.first : {};\n            current.propertySource = propertySource;\n            current.propertyName = propertyName;\n            current.notifier = notifier;\n            notifier.subscribe(this, propertyName);\n            if (prev !== null) {\n                if (!this.needsRefresh) {\n                    // Declaring the variable prior to assignment below circumvents\n                    // a bug in Angular's optimization process causing infinite recursion\n                    // of this watch() method. Details https://github.com/microsoft/fast/issues/4969\n                    let prevValue;\n                    watcher = void 0;\n                    /* eslint-disable-next-line */\n                    prevValue = prev.propertySource[prev.propertyName];\n                    /* eslint-disable-next-line */\n                    watcher = this;\n                    if (propertySource === prevValue) {\n                        this.needsRefresh = true;\n                    }\n                }\n                prev.next = current;\n            }\n            this.last = current;\n        }\n        handleChange() {\n            if (this.needsQueue) {\n                this.needsQueue = false;\n                queueUpdate(this);\n            }\n            else if (!this.isAsync) {\n                this.call();\n            }\n        }\n        call() {\n            if (this.last !== null) {\n                this.needsQueue = this.isAsync;\n                this.notify(this);\n            }\n        }\n        *records() {\n            let next = this.first;\n            while (next !== void 0) {\n                yield next;\n                next = next.next;\n            }\n        }\n    }\n    makeSerializationNoop(ExpressionNotifierImplementation);\n    return Object.freeze({\n        /**\n         * @internal\n         * @param factory - The factory used to create array observers.\n         */\n        setArrayObserverFactory(factory) {\n            createArrayObserver = factory;\n        },\n        /**\n         * Gets a notifier for an object or Array.\n         * @param source - The object or Array to get the notifier for.\n         */\n        getNotifier,\n        /**\n         * Records a property change for a source object.\n         * @param source - The object to record the change against.\n         * @param propertyName - The property to track as changed.\n         */\n        track(source, propertyName) {\n            watcher && watcher.watch(source, propertyName);\n        },\n        /**\n         * Notifies watchers that the currently executing property getter or function is volatile\n         * with respect to its observable dependencies.\n         */\n        trackVolatile() {\n            watcher && (watcher.needsRefresh = true);\n        },\n        /**\n         * Notifies subscribers of a source object of changes.\n         * @param source - the object to notify of changes.\n         * @param args - The change args to pass to subscribers.\n         */\n        notify(source, args) {\n            /* eslint-disable-next-line @typescript-eslint/no-use-before-define */\n            getNotifier(source).notify(args);\n        },\n        /**\n         * Defines an observable property on an object or prototype.\n         * @param target - The target object to define the observable on.\n         * @param nameOrAccessor - The name of the property to define as observable;\n         * or a custom accessor that specifies the property name and accessor implementation.\n         */\n        defineProperty(target, nameOrAccessor) {\n            if (isString(nameOrAccessor)) {\n                nameOrAccessor = new DefaultObservableAccessor(nameOrAccessor);\n            }\n            getAccessors(target).push(nameOrAccessor);\n            Reflect.defineProperty(target, nameOrAccessor.name, {\n                enumerable: true,\n                get() {\n                    return nameOrAccessor.getValue(this);\n                },\n                set(newValue) {\n                    nameOrAccessor.setValue(this, newValue);\n                },\n            });\n        },\n        /**\n         * Finds all the observable accessors defined on the target,\n         * including its prototype chain.\n         * @param target - The target object to search for accessor on.\n         */\n        getAccessors,\n        /**\n         * Creates a {@link ExpressionNotifier} that can watch the\n         * provided {@link Expression} for changes.\n         * @param expression - The binding to observe.\n         * @param initialSubscriber - An initial subscriber to changes in the binding value.\n         * @param isVolatileBinding - Indicates whether the binding's dependency list must be re-evaluated on every value evaluation.\n         */\n        binding(expression, initialSubscriber, isVolatileBinding = this.isVolatileBinding(expression)) {\n            return new ExpressionNotifierImplementation(expression, initialSubscriber, isVolatileBinding);\n        },\n        /**\n         * Determines whether a binding expression is volatile and needs to have its dependency list re-evaluated\n         * on every evaluation of the value.\n         * @param expression - The binding to inspect.\n         */\n        isVolatileBinding(expression) {\n            return volatileRegex.test(expression.toString());\n        },\n    });\n});\n/**\n * Decorator: Defines an observable property on the target.\n * @param target - The target to define the observable on.\n * @param nameOrAccessor - The property name or accessor to define the observable as.\n * @public\n */\nexport function observable(target, nameOrAccessor) {\n    Observable.defineProperty(target, nameOrAccessor);\n}\n/**\n * Decorator: Marks a property getter as having volatile observable dependencies.\n * @param target - The target that the property is defined on.\n * @param name - The property name.\n * @param name - The existing descriptor.\n * @public\n */\nexport function volatile(target, name, descriptor) {\n    return Object.assign({}, descriptor, {\n        get() {\n            Observable.trackVolatile();\n            return descriptor.get.apply(this);\n        },\n    });\n}\nconst contextEvent = FAST.getById(KernelServiceId.contextEvent, () => {\n    let current = null;\n    return {\n        get() {\n            return current;\n        },\n        set(event) {\n            current = event;\n        },\n    };\n});\n/**\n * Provides additional contextual information available to behaviors and expressions.\n * @public\n */\nexport const ExecutionContext = Object.freeze({\n    /**\n     * A default execution context.\n     */\n    default: {\n        index: 0,\n        length: 0,\n        get event() {\n            return ExecutionContext.getEvent();\n        },\n        eventDetail() {\n            return this.event.detail;\n        },\n        eventTarget() {\n            return this.event.target;\n        },\n    },\n    /**\n     * Gets the current event.\n     * @returns An event object.\n     */\n    getEvent() {\n        return contextEvent.get();\n    },\n    /**\n     * Sets the current event.\n     * @param event - An event object.\n     */\n    setEvent(event) {\n        contextEvent.set(event);\n    },\n});\n","/**\n * Captures a binding expression along with related information and capabilities.\n *\n * @public\n */\nexport class Binding {\n    /**\n     * Creates a binding.\n     * @param evaluate - Evaluates the binding.\n     * @param policy - The security policy to associate with this binding.\n     * @param isVolatile - Indicates whether the binding is volatile.\n     */\n    constructor(evaluate, policy, isVolatile = false) {\n        this.evaluate = evaluate;\n        this.policy = policy;\n        this.isVolatile = isVolatile;\n    }\n}\n","import { Observable } from \"../observation/observable.js\";\nimport { Binding } from \"./binding.js\";\nclass OneWayBinding extends Binding {\n    createObserver(subscriber) {\n        return Observable.binding(this.evaluate, subscriber, this.isVolatile);\n    }\n}\n/**\n * Creates an standard binding.\n * @param expression - The binding to refresh when changed.\n * @param policy - The security policy to associate with th binding.\n * @param isVolatile - Indicates whether the binding is volatile or not.\n * @returns A binding configuration.\n * @public\n */\nexport function oneWay(expression, policy, isVolatile = Observable.isVolatileBinding(expression)) {\n    return new OneWayBinding(expression, policy, isVolatile);\n}\n/**\n * Creates an event listener binding.\n * @param expression - The binding to invoke when the event is raised.\n * @param options - Event listener options.\n * @returns A binding configuration.\n * @public\n */\nexport function listener(expression, options) {\n    const config = new OneWayBinding(expression);\n    config.options = options;\n    return config;\n}\n","import { makeSerializationNoop } from \"../platform.js\";\nimport { Binding } from \"./binding.js\";\nclass OneTimeBinding extends Binding {\n    createObserver() {\n        return this;\n    }\n    bind(controller) {\n        return this.evaluate(controller.source, controller.context);\n    }\n}\nmakeSerializationNoop(OneTimeBinding);\n/**\n * Creates a one time binding\n * @param expression - The binding to refresh when signaled.\n * @param policy - The security policy to associate with th binding.\n * @returns A binding configuration.\n * @public\n */\nexport function oneTime(expression, policy) {\n    return new OneTimeBinding(expression, policy);\n}\n","let DefaultStyleStrategy;\nfunction reduceStyles(styles) {\n    return styles\n        .map((x) => x instanceof ElementStyles ? reduceStyles(x.styles) : [x])\n        .reduce((prev, curr) => prev.concat(curr), []);\n}\n/**\n * Represents styles that can be applied to a custom element.\n * @public\n */\nexport class ElementStyles {\n    /**\n     * Creates an instance of ElementStyles.\n     * @param styles - The styles that will be associated with elements.\n     */\n    constructor(styles) {\n        this.styles = styles;\n        this.targets = new WeakSet();\n        this._strategy = null;\n        this.behaviors = styles\n            .map((x) => x instanceof ElementStyles ? x.behaviors : null)\n            .reduce((prev, curr) => (curr === null ? prev : prev === null ? curr : prev.concat(curr)), null);\n    }\n    /**\n     * Gets the StyleStrategy associated with these element styles.\n     */\n    get strategy() {\n        if (this._strategy === null) {\n            this.withStrategy(DefaultStyleStrategy);\n        }\n        return this._strategy;\n    }\n    /** @internal */\n    addStylesTo(target) {\n        this.strategy.addStylesTo(target);\n        this.targets.add(target);\n    }\n    /** @internal */\n    removeStylesFrom(target) {\n        this.strategy.removeStylesFrom(target);\n        this.targets.delete(target);\n    }\n    /** @internal */\n    isAttachedTo(target) {\n        return this.targets.has(target);\n    }\n    /**\n     * Associates behaviors with this set of styles.\n     * @param behaviors - The behaviors to associate.\n     */\n    withBehaviors(...behaviors) {\n        this.behaviors =\n            this.behaviors === null ? behaviors : this.behaviors.concat(behaviors);\n        return this;\n    }\n    /**\n     * Sets the strategy that handles adding/removing these styles for an element.\n     * @param strategy - The strategy to use.\n     */\n    withStrategy(Strategy) {\n        this._strategy = new Strategy(reduceStyles(this.styles));\n        return this;\n    }\n    /**\n     * Sets the default strategy type to use when creating style strategies.\n     * @param Strategy - The strategy type to construct.\n     */\n    static setDefaultStrategy(Strategy) {\n        DefaultStyleStrategy = Strategy;\n    }\n    /**\n     * Normalizes a set of composable style options.\n     * @param styles - The style options to normalize.\n     * @returns A singular ElementStyles instance or undefined.\n     */\n    static normalize(styles) {\n        return styles === void 0\n            ? void 0\n            : Array.isArray(styles)\n                ? new ElementStyles(styles)\n                : styles instanceof ElementStyles\n                    ? styles\n                    : new ElementStyles([styles]);\n    }\n}\n/**\n * Indicates whether the DOM supports the adoptedStyleSheets feature.\n */\nElementStyles.supportsAdoptedStyleSheets = Array.isArray(document.adoptedStyleSheets) &&\n    \"replace\" in CSSStyleSheet.prototype;\n","const marker = `fast-${Math.random().toString(36).substring(2, 8)}`;\nconst interpolationStart = `${marker}{`;\nconst interpolationEnd = `}${marker}`;\nconst interpolationEndLength = interpolationEnd.length;\nlet id = 0;\n/** @internal */\nexport const nextId = () => `${marker}-${++id}`;\n/**\n * Common APIs related to markup generation.\n * @public\n */\nexport const Markup = Object.freeze({\n    /**\n     * Creates a placeholder string suitable for marking out a location *within*\n     * an attribute value or HTML content.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by binding directives.\n     */\n    interpolation: (id) => `${interpolationStart}${id}${interpolationEnd}`,\n    /**\n     * Creates a placeholder that manifests itself as an attribute on an\n     * element.\n     * @param attributeName - The name of the custom attribute.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by attribute directives such as `ref`, `slotted`, and `children`.\n     */\n    attribute: (id) => `${nextId()}=\"${interpolationStart}${id}${interpolationEnd}\"`,\n    /**\n     * Creates a placeholder that manifests itself as a marker within the DOM structure.\n     * @param index - The directive index to create the placeholder for.\n     * @remarks\n     * Used internally by structural directives such as `repeat`.\n     */\n    comment: (id) => `<!--${interpolationStart}${id}${interpolationEnd}-->`,\n});\n/**\n * Common APIs related to content parsing.\n * @public\n */\nexport const Parser = Object.freeze({\n    /**\n     * Parses text content or HTML attribute content, separating out the static strings\n     * from the directives.\n     * @param value - The content or attribute string to parse.\n     * @param factories - A list of directives to search for in the string.\n     * @returns A heterogeneous array of static strings interspersed with\n     * directives or null if no directives are found in the string.\n     */\n    parse(value, factories) {\n        const parts = value.split(interpolationStart);\n        if (parts.length === 1) {\n            return null;\n        }\n        const result = [];\n        for (let i = 0, ii = parts.length; i < ii; ++i) {\n            const current = parts[i];\n            const index = current.indexOf(interpolationEnd);\n            let literal;\n            if (index === -1) {\n                literal = current;\n            }\n            else {\n                const factoryId = current.substring(0, index);\n                result.push(factories[factoryId]);\n                literal = current.substring(index + interpolationEndLength);\n            }\n            if (literal !== \"\") {\n                result.push(literal);\n            }\n        }\n        return result;\n    },\n});\n","import { DOMAspect } from \"../dom.js\";\nimport { createTypeRegistry, makeSerializationNoop } from \"../platform.js\";\nimport { Markup } from \"./markup.js\";\nconst registry = createTypeRegistry();\n/**\n * Instructs the template engine to apply behavior to a node.\n * @public\n */\nexport const HTMLDirective = Object.freeze({\n    /**\n     * Gets the directive definition associated with the instance.\n     * @param instance - The directive instance to retrieve the definition for.\n     */\n    getForInstance: registry.getForInstance,\n    /**\n     * Gets the directive definition associated with the specified type.\n     * @param type - The directive type to retrieve the definition for.\n     */\n    getByType: registry.getByType,\n    /**\n     * Defines an HTMLDirective based on the options.\n     * @param type - The type to define as a directive.\n     * @param options - Options that specify the directive's application.\n     */\n    define(type, options) {\n        options = options || {};\n        options.type = type;\n        registry.register(options);\n        return type;\n    },\n    /**\n     *\n     * @param directive - The directive to assign the aspect to.\n     * @param value - The value to base the aspect determination on.\n     * @remarks\n     * If a falsy value is provided, then the content aspect will be assigned.\n     */\n    assignAspect(directive, value) {\n        if (!value) {\n            directive.aspectType = DOMAspect.content;\n            return;\n        }\n        directive.sourceAspect = value;\n        switch (value[0]) {\n            case \":\":\n                directive.targetAspect = value.substring(1);\n                directive.aspectType =\n                    directive.targetAspect === \"classList\"\n                        ? DOMAspect.tokenList\n                        : DOMAspect.property;\n                break;\n            case \"?\":\n                directive.targetAspect = value.substring(1);\n                directive.aspectType = DOMAspect.booleanAttribute;\n                break;\n            case \"@\":\n                directive.targetAspect = value.substring(1);\n                directive.aspectType = DOMAspect.event;\n                break;\n            default:\n                directive.targetAspect = value;\n                directive.aspectType = DOMAspect.attribute;\n                break;\n        }\n    },\n});\n/**\n * Decorator: Defines an HTMLDirective.\n * @param options - Provides options that specify the directive's application.\n * @public\n */\nexport function htmlDirective(options) {\n    /* eslint-disable-next-line @typescript-eslint/explicit-function-return-type */\n    return function (type) {\n        HTMLDirective.define(type, options);\n    };\n}\n/**\n * A base class used for attribute directives that don't need internal state.\n * @public\n */\nexport class StatelessAttachedAttributeDirective {\n    /**\n     * Creates an instance of RefDirective.\n     * @param options - The options to use in configuring the directive.\n     */\n    constructor(options) {\n        this.options = options;\n    }\n    /**\n     * Creates a placeholder string based on the directive's index within the template.\n     * @param index - The index of the directive within the template.\n     * @remarks\n     * Creates a custom attribute placeholder.\n     */\n    createHTML(add) {\n        return Markup.attribute(add(this));\n    }\n    /**\n     * Creates a behavior.\n     * @param targets - The targets available for behaviors to be attached to.\n     */\n    createBehavior() {\n        return this;\n    }\n}\nmakeSerializationNoop(StatelessAttachedAttributeDirective);\n","import \"../interfaces.js\";\nimport { ExecutionContext, } from \"../observation/observable.js\";\nimport { FAST } from \"../platform.js\";\nimport { DOM, DOMAspect } from \"../dom.js\";\nimport { HTMLDirective, } from \"./html-directive.js\";\nimport { Markup } from \"./markup.js\";\nfunction updateContent(target, aspect, value, controller) {\n    // If there's no actual value, then this equates to the\n    // empty string for the purposes of content bindings.\n    if (value === null || value === undefined) {\n        value = \"\";\n    }\n    // If the value has a \"create\" method, then it's a ContentTemplate.\n    if (value.create) {\n        target.textContent = \"\";\n        let view = target.$fastView;\n        // If there's no previous view that we might be able to\n        // reuse then create a new view from the template.\n        if (view === void 0) {\n            view = value.create();\n        }\n        else {\n            // If there is a previous view, but it wasn't created\n            // from the same template as the new value, then we\n            // need to remove the old view if it's still in the DOM\n            // and create a new view from the template.\n            if (target.$fastTemplate !== value) {\n                if (view.isComposed) {\n                    view.remove();\n                    view.unbind();\n                }\n                view = value.create();\n            }\n        }\n        // It's possible that the value is the same as the previous template\n        // and that there's actually no need to compose it.\n        if (!view.isComposed) {\n            view.isComposed = true;\n            view.bind(controller.source, controller.context);\n            view.insertBefore(target);\n            target.$fastView = view;\n            target.$fastTemplate = value;\n        }\n        else if (view.needsBindOnly) {\n            view.needsBindOnly = false;\n            view.bind(controller.source, controller.context);\n        }\n    }\n    else {\n        const view = target.$fastView;\n        // If there is a view and it's currently composed into\n        // the DOM, then we need to remove it.\n        if (view !== void 0 && view.isComposed) {\n            view.isComposed = false;\n            view.remove();\n            if (view.needsBindOnly) {\n                view.needsBindOnly = false;\n            }\n            else {\n                view.unbind();\n            }\n        }\n        target.textContent = value;\n    }\n}\nfunction updateTokenList(target, aspect, value) {\n    var _a;\n    const lookup = `${this.id}-t`;\n    const state = (_a = target[lookup]) !== null && _a !== void 0 ? _a : (target[lookup] = { v: 0, cv: Object.create(null) });\n    const classVersions = state.cv;\n    let version = state.v;\n    const tokenList = target[aspect];\n    // Add the classes, tracking the version at which they were added.\n    if (value !== null && value !== undefined && value.length) {\n        const names = value.split(/\\s+/);\n        for (let i = 0, ii = names.length; i < ii; ++i) {\n            const currentName = names[i];\n            if (currentName === \"\") {\n                continue;\n            }\n            classVersions[currentName] = version;\n            tokenList.add(currentName);\n        }\n    }\n    state.v = version + 1;\n    // If this is the first call to add classes, there's no need to remove old ones.\n    if (version === 0) {\n        return;\n    }\n    // Remove classes from the previous version.\n    version -= 1;\n    for (const name in classVersions) {\n        if (classVersions[name] === version) {\n            tokenList.remove(name);\n        }\n    }\n}\nconst sinkLookup = {\n    [DOMAspect.attribute]: DOM.setAttribute,\n    [DOMAspect.booleanAttribute]: DOM.setBooleanAttribute,\n    [DOMAspect.property]: (t, a, v) => (t[a] = v),\n    [DOMAspect.content]: updateContent,\n    [DOMAspect.tokenList]: updateTokenList,\n    [DOMAspect.event]: () => void 0,\n};\n/**\n * A directive that applies bindings.\n * @public\n */\nexport class HTMLBindingDirective {\n    /**\n     * Creates an instance of HTMLBindingDirective.\n     * @param dataBinding - The binding configuration to apply.\n     */\n    constructor(dataBinding) {\n        this.dataBinding = dataBinding;\n        this.updateTarget = null;\n        /**\n         * The type of aspect to target.\n         */\n        this.aspectType = DOMAspect.content;\n    }\n    /**\n     * Creates HTML to be used within a template.\n     * @param add - Can be used to add  behavior factories to a template.\n     */\n    createHTML(add) {\n        return Markup.interpolation(add(this));\n    }\n    /**\n     * Creates a behavior.\n     */\n    createBehavior() {\n        var _a;\n        if (this.updateTarget === null) {\n            const sink = sinkLookup[this.aspectType];\n            const policy = (_a = this.dataBinding.policy) !== null && _a !== void 0 ? _a : this.policy;\n            if (!sink) {\n                throw FAST.error(1205 /* Message.unsupportedBindingBehavior */);\n            }\n            this.data = `${this.id}-d`;\n            this.updateTarget = policy.protect(this.targetTagName, this.aspectType, this.targetAspect, sink);\n        }\n        return this;\n    }\n    /** @internal */\n    bind(controller) {\n        var _a;\n        const target = controller.targets[this.targetNodeId];\n        switch (this.aspectType) {\n            case DOMAspect.event:\n                target[this.data] = controller;\n                target.addEventListener(this.targetAspect, this, this.dataBinding.options);\n                break;\n            case DOMAspect.content:\n                controller.onUnbind(this);\n            // intentional fall through\n            default:\n                const observer = (_a = target[this.data]) !== null && _a !== void 0 ? _a : (target[this.data] = this.dataBinding.createObserver(this, this));\n                observer.target = target;\n                observer.controller = controller;\n                this.updateTarget(target, this.targetAspect, observer.bind(controller), controller);\n                break;\n        }\n    }\n    /** @internal */\n    unbind(controller) {\n        const target = controller.targets[this.targetNodeId];\n        const view = target.$fastView;\n        if (view !== void 0 && view.isComposed) {\n            view.unbind();\n            view.needsBindOnly = true;\n        }\n    }\n    /** @internal */\n    handleEvent(event) {\n        const controller = event.currentTarget[this.data];\n        if (controller.isBound) {\n            ExecutionContext.setEvent(event);\n            const result = this.dataBinding.evaluate(controller.source, controller.context);\n            ExecutionContext.setEvent(null);\n            if (result !== true) {\n                event.preventDefault();\n            }\n        }\n    }\n    /** @internal */\n    handleChange(binding, observer) {\n        const target = observer.target;\n        const controller = observer.controller;\n        this.updateTarget(target, this.targetAspect, observer.bind(controller), controller);\n    }\n}\nHTMLDirective.define(HTMLBindingDirective, { aspected: true });\n","import { ExecutionContext, Observable, SourceLifetime, } from \"../observation/observable.js\";\nimport { makeSerializationNoop } from \"../platform.js\";\nfunction removeNodeSequence(firstNode, lastNode) {\n    const parent = firstNode.parentNode;\n    let current = firstNode;\n    let next;\n    while (current !== lastNode) {\n        next = current.nextSibling;\n        parent.removeChild(current);\n        current = next;\n    }\n    parent.removeChild(lastNode);\n}\n/**\n * The standard View implementation, which also implements ElementView and SyntheticView.\n * @public\n */\nexport class HTMLView {\n    /**\n     * Constructs an instance of HTMLView.\n     * @param fragment - The html fragment that contains the nodes for this view.\n     * @param behaviors - The behaviors to be applied to this view.\n     */\n    constructor(fragment, factories, targets) {\n        this.fragment = fragment;\n        this.factories = factories;\n        this.targets = targets;\n        this.behaviors = null;\n        this.unbindables = [];\n        /**\n         * The data that the view is bound to.\n         */\n        this.source = null;\n        /**\n         * Indicates whether the controller is bound.\n         */\n        this.isBound = false;\n        /**\n         * Indicates how the source's lifetime relates to the controller's lifetime.\n         */\n        this.sourceLifetime = SourceLifetime.unknown;\n        /**\n         * The execution context the view is running within.\n         */\n        this.context = this;\n        /**\n         * The index of the current item within a repeat context.\n         */\n        this.index = 0;\n        /**\n         * The length of the current collection within a repeat context.\n         */\n        this.length = 0;\n        this.firstChild = fragment.firstChild;\n        this.lastChild = fragment.lastChild;\n    }\n    /**\n     * The current event within an event handler.\n     */\n    get event() {\n        return ExecutionContext.getEvent();\n    }\n    /**\n     * Indicates whether the current item within a repeat context\n     * has an even index.\n     */\n    get isEven() {\n        return this.index % 2 === 0;\n    }\n    /**\n     * Indicates whether the current item within a repeat context\n     * has an odd index.\n     */\n    get isOdd() {\n        return this.index % 2 !== 0;\n    }\n    /**\n     * Indicates whether the current item within a repeat context\n     * is the first item in the collection.\n     */\n    get isFirst() {\n        return this.index === 0;\n    }\n    /**\n     * Indicates whether the current item within a repeat context\n     * is somewhere in the middle of the collection.\n     */\n    get isInMiddle() {\n        return !this.isFirst && !this.isLast;\n    }\n    /**\n     * Indicates whether the current item within a repeat context\n     * is the last item in the collection.\n     */\n    get isLast() {\n        return this.index === this.length - 1;\n    }\n    /**\n     * Returns the typed event detail of a custom event.\n     */\n    eventDetail() {\n        return this.event.detail;\n    }\n    /**\n     * Returns the typed event target of the event.\n     */\n    eventTarget() {\n        return this.event.target;\n    }\n    /**\n     * Appends the view's DOM nodes to the referenced node.\n     * @param node - The parent node to append the view's DOM nodes to.\n     */\n    appendTo(node) {\n        node.appendChild(this.fragment);\n    }\n    /**\n     * Inserts the view's DOM nodes before the referenced node.\n     * @param node - The node to insert the view's DOM before.\n     */\n    insertBefore(node) {\n        if (this.fragment.hasChildNodes()) {\n            node.parentNode.insertBefore(this.fragment, node);\n        }\n        else {\n            const end = this.lastChild;\n            if (node.previousSibling === end)\n                return;\n            const parentNode = node.parentNode;\n            let current = this.firstChild;\n            let next;\n            while (current !== end) {\n                next = current.nextSibling;\n                parentNode.insertBefore(current, node);\n                current = next;\n            }\n            parentNode.insertBefore(end, node);\n        }\n    }\n    /**\n     * Removes the view's DOM nodes.\n     * The nodes are not disposed and the view can later be re-inserted.\n     */\n    remove() {\n        const fragment = this.fragment;\n        const end = this.lastChild;\n        let current = this.firstChild;\n        let next;\n        while (current !== end) {\n            next = current.nextSibling;\n            fragment.appendChild(current);\n            current = next;\n        }\n        fragment.appendChild(end);\n    }\n    /**\n     * Removes the view and unbinds its behaviors, disposing of DOM nodes afterward.\n     * Once a view has been disposed, it cannot be inserted or bound again.\n     */\n    dispose() {\n        removeNodeSequence(this.firstChild, this.lastChild);\n        this.unbind();\n    }\n    onUnbind(behavior) {\n        this.unbindables.push(behavior);\n    }\n    /**\n     * Binds a view's behaviors to its binding source.\n     * @param source - The binding source for the view's binding behaviors.\n     * @param context - The execution context to run the behaviors within.\n     */\n    bind(source, context = this) {\n        if (this.source === source) {\n            return;\n        }\n        let behaviors = this.behaviors;\n        if (behaviors === null) {\n            this.source = source;\n            this.context = context;\n            this.behaviors = behaviors = new Array(this.factories.length);\n            const factories = this.factories;\n            for (let i = 0, ii = factories.length; i < ii; ++i) {\n                const behavior = factories[i].createBehavior();\n                behavior.bind(this);\n                behaviors[i] = behavior;\n            }\n        }\n        else {\n            if (this.source !== null) {\n                this.evaluateUnbindables();\n            }\n            this.isBound = false;\n            this.source = source;\n            this.context = context;\n            for (let i = 0, ii = behaviors.length; i < ii; ++i) {\n                behaviors[i].bind(this);\n            }\n        }\n        this.isBound = true;\n    }\n    /**\n     * Unbinds a view's behaviors from its binding source.\n     */\n    unbind() {\n        if (!this.isBound || this.source === null) {\n            return;\n        }\n        this.evaluateUnbindables();\n        this.source = null;\n        this.context = this;\n        this.isBound = false;\n    }\n    evaluateUnbindables() {\n        const unbindables = this.unbindables;\n        for (let i = 0, ii = unbindables.length; i < ii; ++i) {\n            unbindables[i].unbind(this);\n        }\n        unbindables.length = 0;\n    }\n    /**\n     * Efficiently disposes of a contiguous range of synthetic view instances.\n     * @param views - A contiguous range of views to be disposed.\n     */\n    static disposeContiguousBatch(views) {\n        if (views.length === 0) {\n            return;\n        }\n        removeNodeSequence(views[0].firstChild, views[views.length - 1].lastChild);\n        for (let i = 0, ii = views.length; i < ii; ++i) {\n            views[i].unbind();\n        }\n    }\n}\nmakeSerializationNoop(HTMLView);\nObservable.defineProperty(HTMLView.prototype, \"index\");\nObservable.defineProperty(HTMLView.prototype, \"length\");\n","import { isFunction, isString } from \"../interfaces.js\";\nimport { FAST } from \"../platform.js\";\nimport { DOM } from \"../dom.js\";\nimport { oneTime } from \"../binding/one-time.js\";\nimport { nextId, Parser } from \"./markup.js\";\nimport { HTMLBindingDirective } from \"./html-binding-directive.js\";\nimport { HTMLDirective, } from \"./html-directive.js\";\nimport { HTMLView } from \"./view.js\";\nconst targetIdFrom = (parentId, nodeIndex) => `${parentId}.${nodeIndex}`;\nconst descriptorCache = {};\n// used to prevent creating lots of objects just to track node and index while compiling\nconst next = {\n    index: 0,\n    node: null,\n};\nfunction tryWarn(name) {\n    if (!name.startsWith(\"fast-\")) {\n        FAST.warn(1204 /* Message.hostBindingWithoutHost */, { name });\n    }\n}\nconst warningHost = new Proxy(document.createElement(\"div\"), {\n    get(target, property) {\n        tryWarn(property);\n        const value = Reflect.get(target, property);\n        return isFunction(value) ? value.bind(target) : value;\n    },\n    set(target, property, value) {\n        tryWarn(property);\n        return Reflect.set(target, property, value);\n    },\n});\nclass CompilationContext {\n    constructor(fragment, directives, policy) {\n        this.fragment = fragment;\n        this.directives = directives;\n        this.policy = policy;\n        this.proto = null;\n        this.nodeIds = new Set();\n        this.descriptors = {};\n        this.factories = [];\n    }\n    addFactory(factory, parentId, nodeId, targetIndex, tagName) {\n        var _a, _b;\n        if (!this.nodeIds.has(nodeId)) {\n            this.nodeIds.add(nodeId);\n            this.addTargetDescriptor(parentId, nodeId, targetIndex);\n        }\n        factory.id = (_a = factory.id) !== null && _a !== void 0 ? _a : nextId();\n        factory.targetNodeId = nodeId;\n        factory.targetTagName = tagName;\n        factory.policy = (_b = factory.policy) !== null && _b !== void 0 ? _b : this.policy;\n        this.factories.push(factory);\n    }\n    freeze() {\n        this.proto = Object.create(null, this.descriptors);\n        return this;\n    }\n    addTargetDescriptor(parentId, targetId, targetIndex) {\n        const descriptors = this.descriptors;\n        if (targetId === \"r\" || // root\n            targetId === \"h\" || // host\n            descriptors[targetId]) {\n            return;\n        }\n        if (!descriptors[parentId]) {\n            const index = parentId.lastIndexOf(\".\");\n            const grandparentId = parentId.substring(0, index);\n            const childIndex = parseInt(parentId.substring(index + 1));\n            this.addTargetDescriptor(grandparentId, parentId, childIndex);\n        }\n        let descriptor = descriptorCache[targetId];\n        if (!descriptor) {\n            const field = `_${targetId}`;\n            descriptorCache[targetId] = descriptor = {\n                get() {\n                    var _a;\n                    return ((_a = this[field]) !== null && _a !== void 0 ? _a : (this[field] = this[parentId].childNodes[targetIndex]));\n                },\n            };\n        }\n        descriptors[targetId] = descriptor;\n    }\n    createView(hostBindingTarget) {\n        const fragment = this.fragment.cloneNode(true);\n        const targets = Object.create(this.proto);\n        targets.r = fragment;\n        targets.h = hostBindingTarget !== null && hostBindingTarget !== void 0 ? hostBindingTarget : warningHost;\n        for (const id of this.nodeIds) {\n            targets[id]; // trigger locator\n        }\n        return new HTMLView(fragment, this.factories, targets);\n    }\n}\nfunction compileAttributes(context, parentId, node, nodeId, nodeIndex, includeBasicValues = false) {\n    const attributes = node.attributes;\n    const directives = context.directives;\n    for (let i = 0, ii = attributes.length; i < ii; ++i) {\n        const attr = attributes[i];\n        const attrValue = attr.value;\n        const parseResult = Parser.parse(attrValue, directives);\n        let result = null;\n        if (parseResult === null) {\n            if (includeBasicValues) {\n                result = new HTMLBindingDirective(oneTime(() => attrValue, context.policy));\n                HTMLDirective.assignAspect(result, attr.name);\n            }\n        }\n        else {\n            /* eslint-disable-next-line @typescript-eslint/no-use-before-define */\n            result = Compiler.aggregate(parseResult, context.policy);\n        }\n        if (result !== null) {\n            node.removeAttributeNode(attr);\n            i--;\n            ii--;\n            context.addFactory(result, parentId, nodeId, nodeIndex, node.tagName);\n        }\n    }\n}\nfunction compileContent(context, node, parentId, nodeId, nodeIndex) {\n    const parseResult = Parser.parse(node.textContent, context.directives);\n    if (parseResult === null) {\n        next.node = node.nextSibling;\n        next.index = nodeIndex + 1;\n        return next;\n    }\n    let currentNode;\n    let lastNode = (currentNode = node);\n    for (let i = 0, ii = parseResult.length; i < ii; ++i) {\n        const currentPart = parseResult[i];\n        if (i !== 0) {\n            nodeIndex++;\n            nodeId = targetIdFrom(parentId, nodeIndex);\n            currentNode = lastNode.parentNode.insertBefore(document.createTextNode(\"\"), lastNode.nextSibling);\n        }\n        if (isString(currentPart)) {\n            currentNode.textContent = currentPart;\n        }\n        else {\n            currentNode.textContent = \" \";\n            HTMLDirective.assignAspect(currentPart);\n            context.addFactory(currentPart, parentId, nodeId, nodeIndex, null);\n        }\n        lastNode = currentNode;\n    }\n    next.index = nodeIndex + 1;\n    next.node = lastNode.nextSibling;\n    return next;\n}\nfunction compileChildren(context, parent, parentId) {\n    let nodeIndex = 0;\n    let childNode = parent.firstChild;\n    while (childNode) {\n        /* eslint-disable-next-line @typescript-eslint/no-use-before-define */\n        const result = compileNode(context, parentId, childNode, nodeIndex);\n        childNode = result.node;\n        nodeIndex = result.index;\n    }\n}\nfunction compileNode(context, parentId, node, nodeIndex) {\n    const nodeId = targetIdFrom(parentId, nodeIndex);\n    switch (node.nodeType) {\n        case 1: // element node\n            compileAttributes(context, parentId, node, nodeId, nodeIndex);\n            compileChildren(context, node, nodeId);\n            break;\n        case 3: // text node\n            return compileContent(context, node, parentId, nodeId, nodeIndex);\n        case 8: // comment\n            const parts = Parser.parse(node.data, context.directives);\n            if (parts !== null) {\n                context.addFactory(\n                /* eslint-disable-next-line @typescript-eslint/no-use-before-define */\n                Compiler.aggregate(parts), parentId, nodeId, nodeIndex, null);\n            }\n            break;\n    }\n    next.index = nodeIndex + 1;\n    next.node = node.nextSibling;\n    return next;\n}\nfunction isMarker(node, directives) {\n    return (node &&\n        node.nodeType == 8 &&\n        Parser.parse(node.data, directives) !== null);\n}\nconst templateTag = \"TEMPLATE\";\n/**\n * Common APIs related to compilation.\n * @public\n */\nexport const Compiler = {\n    /**\n     * Compiles a template and associated directives into a compilation\n     * result which can be used to create views.\n     * @param html - The html string or template element to compile.\n     * @param factories - The behavior factories referenced by the template.\n     * @param policy - The security policy to compile the html with.\n     * @remarks\n     * The template that is provided for compilation is altered in-place\n     * and cannot be compiled again. If the original template must be preserved,\n     * it is recommended that you clone the original and pass the clone to this API.\n     * @public\n     */\n    compile(html, factories, policy = DOM.policy) {\n        let template;\n        if (isString(html)) {\n            template = document.createElement(templateTag);\n            template.innerHTML = policy.createHTML(html);\n            const fec = template.content.firstElementChild;\n            if (fec !== null && fec.tagName === templateTag) {\n                template = fec;\n            }\n        }\n        else {\n            template = html;\n        }\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1111864\n        const fragment = document.adoptNode(template.content);\n        const context = new CompilationContext(fragment, factories, policy);\n        compileAttributes(context, \"\", template, /* host */ \"h\", 0, true);\n        if (\n        // If the first node in a fragment is a marker, that means it's an unstable first node,\n        // because something like a when, repeat, etc. could add nodes before the marker.\n        // To mitigate this, we insert a stable first node. However, if we insert a node,\n        // that will alter the result of the TreeWalker. So, we also need to offset the target index.\n        isMarker(fragment.firstChild, factories) ||\n            // Or if there is only one node and a directive, it means the template's content\n            // is *only* the directive. In that case, HTMLView.dispose() misses any nodes inserted by\n            // the directive. Inserting a new node ensures proper disposal of nodes added by the directive.\n            (fragment.childNodes.length === 1 && Object.keys(factories).length > 0)) {\n            fragment.insertBefore(document.createComment(\"\"), fragment.firstChild);\n        }\n        compileChildren(context, fragment, /* root */ \"r\");\n        next.node = null; // prevent leaks\n        return context.freeze();\n    },\n    /**\n     * Sets the default compilation strategy that will be used by the ViewTemplate whenever\n     * it needs to compile a view preprocessed with the html template function.\n     * @param strategy - The compilation strategy to use when compiling templates.\n     */\n    setDefaultStrategy(strategy) {\n        this.compile = strategy;\n    },\n    /**\n     * Aggregates an array of strings and directives into a single directive.\n     * @param parts - A heterogeneous array of static strings interspersed with\n     * directives.\n     * @param policy - The security policy to use with the aggregated bindings.\n     * @returns A single inline directive that aggregates the behavior of all the parts.\n     */\n    aggregate(parts, policy = DOM.policy) {\n        if (parts.length === 1) {\n            return parts[0];\n        }\n        let sourceAspect;\n        let binding;\n        let isVolatile = false;\n        let bindingPolicy = void 0;\n        const partCount = parts.length;\n        const finalParts = parts.map((x) => {\n            if (isString(x)) {\n                return () => x;\n            }\n            sourceAspect = x.sourceAspect || sourceAspect;\n            binding = x.dataBinding || binding;\n            isVolatile = isVolatile || x.dataBinding.isVolatile;\n            bindingPolicy = bindingPolicy || x.dataBinding.policy;\n            return x.dataBinding.evaluate;\n        });\n        const expression = (scope, context) => {\n            let output = \"\";\n            for (let i = 0; i < partCount; ++i) {\n                output += finalParts[i](scope, context);\n            }\n            return output;\n        };\n        binding.evaluate = expression;\n        binding.isVolatile = isVolatile;\n        binding.policy = bindingPolicy !== null && bindingPolicy !== void 0 ? bindingPolicy : policy;\n        const directive = new HTMLBindingDirective(binding);\n        HTMLDirective.assignAspect(directive, sourceAspect);\n        return directive;\n    },\n};\n","import { isFunction, isString } from \"../interfaces.js\";\nimport { Binding } from \"../binding/binding.js\";\nimport { FAST, makeSerializationNoop } from \"../platform.js\";\nimport { oneWay } from \"../binding/one-way.js\";\nimport { oneTime } from \"../binding/one-time.js\";\nimport { HTMLBindingDirective } from \"./html-binding-directive.js\";\nimport { Compiler } from \"./compiler.js\";\nimport { HTMLDirective, } from \"./html-directive.js\";\nimport { nextId } from \"./markup.js\";\n// Much thanks to LitHTML for working this out!\nconst lastAttributeNameRegex = \n/* eslint-disable-next-line no-control-regex */\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\nconst noFactories = Object.create(null);\n/**\n * Inlines a template into another template.\n * @public\n */\nexport class InlineTemplateDirective {\n    /**\n     * Creates an instance of InlineTemplateDirective.\n     * @param template - The template to inline.\n     */\n    constructor(html, factories = noFactories) {\n        this.html = html;\n        this.factories = factories;\n    }\n    /**\n     * Creates HTML to be used within a template.\n     * @param add - Can be used to add  behavior factories to a template.\n     */\n    createHTML(add) {\n        const factories = this.factories;\n        for (const key in factories) {\n            add(factories[key]);\n        }\n        return this.html;\n    }\n}\n/**\n * An empty template partial.\n */\nInlineTemplateDirective.empty = new InlineTemplateDirective(\"\");\nHTMLDirective.define(InlineTemplateDirective);\nfunction createHTML(value, prevString, add, definition = HTMLDirective.getForInstance(value)) {\n    if (definition.aspected) {\n        const match = lastAttributeNameRegex.exec(prevString);\n        if (match !== null) {\n            HTMLDirective.assignAspect(value, match[2]);\n        }\n    }\n    return value.createHTML(add);\n}\n/**\n * A template capable of creating HTMLView instances or rendering directly to DOM.\n * @public\n */\nexport class ViewTemplate {\n    /**\n     * Creates an instance of ViewTemplate.\n     * @param html - The html representing what this template will instantiate, including placeholders for directives.\n     * @param factories - The directives that will be connected to placeholders in the html.\n     * @param policy - The security policy to use when compiling this template.\n     */\n    constructor(html, factories = {}, policy) {\n        this.policy = policy;\n        this.result = null;\n        this.html = html;\n        this.factories = factories;\n    }\n    /**\n     * Creates an HTMLView instance based on this template definition.\n     * @param hostBindingTarget - The element that host behaviors will be bound to.\n     */\n    create(hostBindingTarget) {\n        if (this.result === null) {\n            this.result = Compiler.compile(this.html, this.factories, this.policy);\n        }\n        return this.result.createView(hostBindingTarget);\n    }\n    /**\n     * Returns a directive that can inline the template.\n     */\n    inline() {\n        return new InlineTemplateDirective(isString(this.html) ? this.html : this.html.innerHTML, this.factories);\n    }\n    /**\n     * Sets the DOMPolicy for this template.\n     * @param policy - The policy to associated with this template.\n     * @returns The modified template instance.\n     * @remarks\n     * The DOMPolicy can only be set once for a template and cannot be\n     * set after the template is compiled.\n     */\n    withPolicy(policy) {\n        if (this.result) {\n            throw FAST.error(1208 /* Message.cannotSetTemplatePolicyAfterCompilation */);\n        }\n        if (this.policy) {\n            throw FAST.error(1207 /* Message.onlySetTemplatePolicyOnce */);\n        }\n        this.policy = policy;\n        return this;\n    }\n    /**\n     * Creates an HTMLView from this template, binds it to the source, and then appends it to the host.\n     * @param source - The data source to bind the template to.\n     * @param host - The Element where the template will be rendered.\n     * @param hostBindingTarget - An HTML element to target the host bindings at if different from the\n     * host that the template is being attached to.\n     */\n    render(source, host, hostBindingTarget) {\n        const view = this.create(hostBindingTarget);\n        view.bind(source);\n        view.appendTo(host);\n        return view;\n    }\n    /**\n     * Creates a template based on a set of static strings and dynamic values.\n     * @param strings - The static strings to create the template with.\n     * @param values - The dynamic values to create the template with.\n     * @param policy - The DOMPolicy to associated with the template.\n     * @returns A ViewTemplate.\n     * @remarks\n     * This API should not be used directly under normal circumstances because constructing\n     * a template in this way, if not done properly, can open up the application to XSS\n     * attacks. When using this API, provide a strong DOMPolicy that can properly sanitize\n     * and also be sure to manually sanitize all static strings particularly if they can\n     * come from user input.\n     */\n    static create(strings, values, policy) {\n        let html = \"\";\n        const factories = Object.create(null);\n        const add = (factory) => {\n            var _a;\n            const id = (_a = factory.id) !== null && _a !== void 0 ? _a : (factory.id = nextId());\n            factories[id] = factory;\n            return id;\n        };\n        for (let i = 0, ii = strings.length - 1; i < ii; ++i) {\n            const currentString = strings[i];\n            let currentValue = values[i];\n            let definition;\n            html += currentString;\n            if (isFunction(currentValue)) {\n                currentValue = new HTMLBindingDirective(oneWay(currentValue));\n            }\n            else if (currentValue instanceof Binding) {\n                currentValue = new HTMLBindingDirective(currentValue);\n            }\n            else if (!(definition = HTMLDirective.getForInstance(currentValue))) {\n                const staticValue = currentValue;\n                currentValue = new HTMLBindingDirective(oneTime(() => staticValue));\n            }\n            html += createHTML(currentValue, currentString, add, definition);\n        }\n        return new ViewTemplate(html + strings[strings.length - 1], factories, policy);\n    }\n}\nmakeSerializationNoop(ViewTemplate);\n/**\n * Transforms a template literal string into a ViewTemplate.\n * @param strings - The string fragments that are interpolated with the values.\n * @param values - The values that are interpolated with the string fragments.\n * @remarks\n * The html helper supports interpolation of strings, numbers, binding expressions,\n * other template instances, and Directive instances.\n * @public\n */\nexport const html = ((strings, ...values) => {\n    if (Array.isArray(strings) && Array.isArray(strings.raw)) {\n        return ViewTemplate.create(strings, values);\n    }\n    throw FAST.error(1206 /* Message.directCallToHTMLTagNotAllowed */);\n});\nhtml.partial = (html) => {\n    return new InlineTemplateDirective(html);\n};\n","import { HTMLDirective, StatelessAttachedAttributeDirective, } from \"./html-directive.js\";\n/**\n * The runtime behavior for template references.\n * @public\n */\nexport class RefDirective extends StatelessAttachedAttributeDirective {\n    /**\n     * Bind this behavior.\n     * @param controller - The view controller that manages the lifecycle of this behavior.\n     */\n    bind(controller) {\n        controller.source[this.options] = controller.targets[this.targetNodeId];\n    }\n}\nHTMLDirective.define(RefDirective);\n/**\n * A directive that observes the updates a property with a reference to the element.\n * @param propertyName - The name of the property to assign the reference to.\n * @public\n */\nexport const ref = (propertyName) => new RefDirective(propertyName);\n","import { emptyArray } from \"../platform.js\";\nimport { StatelessAttachedAttributeDirective } from \"./html-directive.js\";\nconst selectElements = (value) => value.nodeType === 1;\n/**\n * Creates a function that can be used to filter a Node array, selecting only elements.\n * @param selector - An optional selector to restrict the filter to.\n * @public\n */\nexport const elements = (selector) => selector\n    ? value => value.nodeType === 1 && value.matches(selector)\n    : selectElements;\n/**\n * A base class for node observation.\n * @public\n * @remarks\n * Internally used by the SlottedDirective and the ChildrenDirective.\n */\nexport class NodeObservationDirective extends StatelessAttachedAttributeDirective {\n    /**\n     * The unique id of the factory.\n     */\n    get id() {\n        return this._id;\n    }\n    set id(value) {\n        this._id = value;\n        this._controllerProperty = `${value}-c`;\n    }\n    /**\n     * Bind this behavior to the source.\n     * @param source - The source to bind to.\n     * @param context - The execution context that the binding is operating within.\n     * @param targets - The targets that behaviors in a view can attach to.\n     */\n    bind(controller) {\n        const target = controller.targets[this.targetNodeId];\n        target[this._controllerProperty] = controller;\n        this.updateTarget(controller.source, this.computeNodes(target));\n        this.observe(target);\n        controller.onUnbind(this);\n    }\n    /**\n     * Unbinds this behavior from the source.\n     * @param source - The source to unbind from.\n     * @param context - The execution context that the binding is operating within.\n     * @param targets - The targets that behaviors in a view can attach to.\n     */\n    unbind(controller) {\n        const target = controller.targets[this.targetNodeId];\n        this.updateTarget(controller.source, emptyArray);\n        this.disconnect(target);\n        target[this._controllerProperty] = null;\n    }\n    /**\n     * Gets the data source for the target.\n     * @param target - The target to get the source for.\n     * @returns The source.\n     */\n    getSource(target) {\n        return target[this._controllerProperty].source;\n    }\n    /**\n     * Updates the source property with the computed nodes.\n     * @param source - The source object to assign the nodes property to.\n     * @param value - The nodes to assign to the source object property.\n     */\n    updateTarget(source, value) {\n        source[this.options.property] = value;\n    }\n    /**\n     * Computes the set of nodes that should be assigned to the source property.\n     * @param target - The target to compute the nodes for.\n     * @returns The computed nodes.\n     * @remarks\n     * Applies filters if provided.\n     */\n    computeNodes(target) {\n        let nodes = this.getNodes(target);\n        if (\"filter\" in this.options) {\n            nodes = nodes.filter(this.options.filter);\n        }\n        return nodes;\n    }\n}\n","import { isString } from \"../interfaces.js\";\nimport { HTMLDirective } from \"./html-directive.js\";\nimport { NodeObservationDirective } from \"./node-observation.js\";\nconst slotEvent = \"slotchange\";\n/**\n * The runtime behavior for slotted node observation.\n * @public\n */\nexport class SlottedDirective extends NodeObservationDirective {\n    /**\n     * Begins observation of the nodes.\n     * @param target - The target to observe.\n     */\n    observe(target) {\n        target.addEventListener(slotEvent, this);\n    }\n    /**\n     * Disconnects observation of the nodes.\n     * @param target - The target to unobserve.\n     */\n    disconnect(target) {\n        target.removeEventListener(slotEvent, this);\n    }\n    /**\n     * Retrieves the raw nodes that should be assigned to the source property.\n     * @param target - The target to get the node to.\n     */\n    getNodes(target) {\n        return target.assignedNodes(this.options);\n    }\n    /** @internal */\n    handleEvent(event) {\n        const target = event.currentTarget;\n        this.updateTarget(this.getSource(target), this.computeNodes(target));\n    }\n}\nHTMLDirective.define(SlottedDirective);\n/**\n * A directive that observes the `assignedNodes()` of a slot and updates a property\n * whenever they change.\n * @param propertyOrOptions - The options used to configure slotted node observation.\n * @public\n */\nexport function slotted(propertyOrOptions) {\n    if (isString(propertyOrOptions)) {\n        propertyOrOptions = { property: propertyOrOptions };\n    }\n    return new SlottedDirective(propertyOrOptions);\n}\n","import { Observable } from \"../observation/observable.js\";\nimport { isString } from \"../interfaces.js\";\nimport { Updates } from \"../observation/update-queue.js\";\nimport { DOM } from \"../dom.js\";\nimport { createMetadataLocator } from \"../platform.js\";\nconst booleanMode = \"boolean\";\nconst reflectMode = \"reflect\";\n/**\n * Metadata used to configure a custom attribute's behavior.\n * @public\n */\nexport const AttributeConfiguration = Object.freeze({\n    /**\n     * Locates all attribute configurations associated with a type.\n     */\n    locate: createMetadataLocator(),\n});\n/**\n * A {@link ValueConverter} that converts to and from `boolean` values.\n * @remarks\n * Used automatically when the `boolean` {@link AttributeMode} is selected.\n * @public\n */\nexport const booleanConverter = {\n    toView(value) {\n        return value ? \"true\" : \"false\";\n    },\n    fromView(value) {\n        return value === null ||\n            value === void 0 ||\n            value === \"false\" ||\n            value === false ||\n            value === 0\n            ? false\n            : true;\n    },\n};\n/**\n * A {@link ValueConverter} that converts to and from `boolean` values. `null`, `undefined`, `\"\"`, and `void` values are converted to `null`.\n * @public\n */\nexport const nullableBooleanConverter = {\n    toView(value) {\n        return typeof value === \"boolean\" ? value.toString() : \"\";\n    },\n    fromView(value) {\n        return [null, undefined, void 0].includes(value)\n            ? null\n            : booleanConverter.fromView(value);\n    },\n};\nfunction toNumber(value) {\n    if (value === null || value === undefined) {\n        return null;\n    }\n    const number = value * 1;\n    return isNaN(number) ? null : number;\n}\n/**\n * A {@link ValueConverter} that converts to and from `number` values.\n * @remarks\n * This converter allows for nullable numbers, returning `null` if the\n * input was `null`, `undefined`, or `NaN`.\n * @public\n */\nexport const nullableNumberConverter = {\n    toView(value) {\n        const output = toNumber(value);\n        return output ? output.toString() : output;\n    },\n    fromView: toNumber,\n};\n/**\n * An implementation of {@link Accessor} that supports reactivity,\n * change callbacks, attribute reflection, and type conversion for\n * custom elements.\n * @public\n */\nexport class AttributeDefinition {\n    /**\n     * Creates an instance of AttributeDefinition.\n     * @param Owner - The class constructor that owns this attribute.\n     * @param name - The name of the property associated with the attribute.\n     * @param attribute - The name of the attribute in HTML.\n     * @param mode - The {@link AttributeMode} that describes the behavior of this attribute.\n     * @param converter - A {@link ValueConverter} that integrates with the property getter/setter\n     * to convert values to and from a DOM string.\n     */\n    constructor(Owner, name, attribute = name.toLowerCase(), mode = reflectMode, converter) {\n        this.guards = new Set();\n        this.Owner = Owner;\n        this.name = name;\n        this.attribute = attribute;\n        this.mode = mode;\n        this.converter = converter;\n        this.fieldName = `_${name}`;\n        this.callbackName = `${name}Changed`;\n        this.hasCallback = this.callbackName in Owner.prototype;\n        if (mode === booleanMode && converter === void 0) {\n            this.converter = booleanConverter;\n        }\n    }\n    /**\n     * Sets the value of the attribute/property on the source element.\n     * @param source - The source element to access.\n     * @param value - The value to set the attribute/property to.\n     */\n    setValue(source, newValue) {\n        const oldValue = source[this.fieldName];\n        const converter = this.converter;\n        if (converter !== void 0) {\n            newValue = converter.fromView(newValue);\n        }\n        if (oldValue !== newValue) {\n            source[this.fieldName] = newValue;\n            this.tryReflectToAttribute(source);\n            if (this.hasCallback) {\n                source[this.callbackName](oldValue, newValue);\n            }\n            source.$fastController.notify(this.name);\n        }\n    }\n    /**\n     * Gets the value of the attribute/property on the source element.\n     * @param source - The source element to access.\n     */\n    getValue(source) {\n        Observable.track(source, this.name);\n        return source[this.fieldName];\n    }\n    /** @internal */\n    onAttributeChangedCallback(element, value) {\n        if (this.guards.has(element)) {\n            return;\n        }\n        this.guards.add(element);\n        this.setValue(element, value);\n        this.guards.delete(element);\n    }\n    tryReflectToAttribute(element) {\n        const mode = this.mode;\n        const guards = this.guards;\n        if (guards.has(element) || mode === \"fromView\") {\n            return;\n        }\n        Updates.enqueue(() => {\n            guards.add(element);\n            const latestValue = element[this.fieldName];\n            switch (mode) {\n                case reflectMode:\n                    const converter = this.converter;\n                    DOM.setAttribute(element, this.attribute, converter !== void 0 ? converter.toView(latestValue) : latestValue);\n                    break;\n                case booleanMode:\n                    DOM.setBooleanAttribute(element, this.attribute, latestValue);\n                    break;\n            }\n            guards.delete(element);\n        });\n    }\n    /**\n     * Collects all attribute definitions associated with the owner.\n     * @param Owner - The class constructor to collect attribute for.\n     * @param attributeLists - Any existing attributes to collect and merge with those associated with the owner.\n     * @internal\n     */\n    static collect(Owner, ...attributeLists) {\n        const attributes = [];\n        attributeLists.push(AttributeConfiguration.locate(Owner));\n        for (let i = 0, ii = attributeLists.length; i < ii; ++i) {\n            const list = attributeLists[i];\n            if (list === void 0) {\n                continue;\n            }\n            for (let j = 0, jj = list.length; j < jj; ++j) {\n                const config = list[j];\n                if (isString(config)) {\n                    attributes.push(new AttributeDefinition(Owner, config));\n                }\n                else {\n                    attributes.push(new AttributeDefinition(Owner, config.property, config.attribute, config.mode, config.converter));\n                }\n            }\n        }\n        return attributes;\n    }\n}\nexport function attr(configOrTarget, prop) {\n    let config;\n    function decorator($target, $prop) {\n        if (arguments.length > 1) {\n            // Non invocation:\n            // - @attr\n            // Invocation with or w/o opts:\n            // - @attr()\n            // - @attr({...opts})\n            config.property = $prop;\n        }\n        AttributeConfiguration.locate($target.constructor).push(config);\n    }\n    if (arguments.length > 1) {\n        // Non invocation:\n        // - @attr\n        config = {};\n        decorator(configOrTarget, prop);\n        return;\n    }\n    // Invocation with or w/o opts:\n    // - @attr()\n    // - @attr({...opts})\n    config = configOrTarget === void 0 ? {} : configOrTarget;\n    return decorator;\n}\n","import { isString, KernelServiceId } from \"../interfaces.js\";\nimport { Observable } from \"../observation/observable.js\";\nimport { createTypeRegistry, FAST } from \"../platform.js\";\nimport { ElementStyles } from \"../styles/element-styles.js\";\nimport { AttributeDefinition } from \"./attributes.js\";\nconst defaultShadowOptions = { mode: \"open\" };\nconst defaultElementOptions = {};\nconst fastElementBaseTypes = new Set();\nconst fastElementRegistry = FAST.getById(KernelServiceId.elementRegistry, () => createTypeRegistry());\n/**\n * Defines metadata for a FASTElement.\n * @public\n */\nexport class FASTElementDefinition {\n    constructor(type, nameOrConfig = type.definition) {\n        var _a;\n        this.platformDefined = false;\n        if (isString(nameOrConfig)) {\n            nameOrConfig = { name: nameOrConfig };\n        }\n        this.type = type;\n        this.name = nameOrConfig.name;\n        this.template = nameOrConfig.template;\n        this.registry = (_a = nameOrConfig.registry) !== null && _a !== void 0 ? _a : customElements;\n        const proto = type.prototype;\n        const attributes = AttributeDefinition.collect(type, nameOrConfig.attributes);\n        const observedAttributes = new Array(attributes.length);\n        const propertyLookup = {};\n        const attributeLookup = {};\n        for (let i = 0, ii = attributes.length; i < ii; ++i) {\n            const current = attributes[i];\n            observedAttributes[i] = current.attribute;\n            propertyLookup[current.name] = current;\n            attributeLookup[current.attribute] = current;\n            Observable.defineProperty(proto, current);\n        }\n        Reflect.defineProperty(type, \"observedAttributes\", {\n            value: observedAttributes,\n            enumerable: true,\n        });\n        this.attributes = attributes;\n        this.propertyLookup = propertyLookup;\n        this.attributeLookup = attributeLookup;\n        this.shadowOptions =\n            nameOrConfig.shadowOptions === void 0\n                ? defaultShadowOptions\n                : nameOrConfig.shadowOptions === null\n                    ? void 0\n                    : Object.assign(Object.assign({}, defaultShadowOptions), nameOrConfig.shadowOptions);\n        this.elementOptions =\n            nameOrConfig.elementOptions === void 0\n                ? defaultElementOptions\n                : Object.assign(Object.assign({}, defaultElementOptions), nameOrConfig.elementOptions);\n        this.styles = ElementStyles.normalize(nameOrConfig.styles);\n        fastElementRegistry.register(this);\n    }\n    /**\n     * Indicates if this element has been defined in at least one registry.\n     */\n    get isDefined() {\n        return this.platformDefined;\n    }\n    /**\n     * Defines a custom element based on this definition.\n     * @param registry - The element registry to define the element in.\n     * @remarks\n     * This operation is idempotent per registry.\n     */\n    define(registry = this.registry) {\n        const type = this.type;\n        if (!registry.get(this.name)) {\n            this.platformDefined = true;\n            registry.define(this.name, type, this.elementOptions);\n        }\n        return this;\n    }\n    /**\n     * Creates an instance of FASTElementDefinition.\n     * @param type - The type this definition is being created for.\n     * @param nameOrDef - The name of the element to define or a config object\n     * that describes the element to define.\n     */\n    static compose(type, nameOrDef) {\n        if (fastElementBaseTypes.has(type) || fastElementRegistry.getByType(type)) {\n            return new FASTElementDefinition(class extends type {\n            }, nameOrDef);\n        }\n        return new FASTElementDefinition(type, nameOrDef);\n    }\n    /**\n     * Registers a FASTElement base type.\n     * @param type - The type to register as a base type.\n     * @internal\n     */\n    static registerBaseType(type) {\n        fastElementBaseTypes.add(type);\n    }\n}\n/**\n * Gets the element definition associated with the specified type.\n * @param type - The custom element type to retrieve the definition for.\n */\nFASTElementDefinition.getByType = fastElementRegistry.getByType;\n/**\n * Gets the element definition associated with the instance.\n * @param instance - The custom element instance to retrieve the definition for.\n */\nFASTElementDefinition.getForInstance = fastElementRegistry.getForInstance;\n","import \"../interfaces.js\";\nimport { PropertyChangeNotifier } from \"../observation/notifier.js\";\nimport { ExecutionContext, Observable, SourceLifetime, } from \"../observation/observable.js\";\nimport { FAST, makeSerializationNoop } from \"../platform.js\";\nimport { ElementStyles } from \"../styles/element-styles.js\";\nimport { FASTElementDefinition } from \"./fast-definitions.js\";\nconst defaultEventOptions = {\n    bubbles: true,\n    composed: true,\n    cancelable: true,\n};\nconst isConnectedPropertyName = \"isConnected\";\nconst shadowRoots = new WeakMap();\nfunction getShadowRoot(element) {\n    var _a, _b;\n    return (_b = (_a = element.shadowRoot) !== null && _a !== void 0 ? _a : shadowRoots.get(element)) !== null && _b !== void 0 ? _b : null;\n}\nlet elementControllerStrategy;\n/**\n * Controls the lifecycle and rendering of a `FASTElement`.\n * @public\n */\nexport class ElementController extends PropertyChangeNotifier {\n    /**\n     * Creates a Controller to control the specified element.\n     * @param element - The element to be controlled by this controller.\n     * @param definition - The element definition metadata that instructs this\n     * controller in how to handle rendering and other platform integrations.\n     * @internal\n     */\n    constructor(element, definition) {\n        super(element);\n        this.boundObservables = null;\n        this.needsInitialization = true;\n        this.hasExistingShadowRoot = false;\n        this._template = null;\n        this.stage = 3 /* Stages.disconnected */;\n        /**\n         * A guard against connecting behaviors multiple times\n         * during connect in scenarios where a behavior adds\n         * another behavior during it's connectedCallback\n         */\n        this.guardBehaviorConnection = false;\n        this.behaviors = null;\n        this._mainStyles = null;\n        /**\n         * This allows Observable.getNotifier(...) to return the Controller\n         * when the notifier for the Controller itself is being requested. The\n         * result is that the Observable system does not need to create a separate\n         * instance of Notifier for observables on the Controller. The component and\n         * the controller will now share the same notifier, removing one-object construct\n         * per web component instance.\n         */\n        this.$fastController = this;\n        /**\n         * The view associated with the custom element.\n         * @remarks\n         * If `null` then the element is managing its own rendering.\n         */\n        this.view = null;\n        this.source = element;\n        this.definition = definition;\n        const shadowOptions = definition.shadowOptions;\n        if (shadowOptions !== void 0) {\n            let shadowRoot = element.shadowRoot;\n            if (shadowRoot) {\n                this.hasExistingShadowRoot = true;\n            }\n            else {\n                shadowRoot = element.attachShadow(shadowOptions);\n                if (shadowOptions.mode === \"closed\") {\n                    shadowRoots.set(element, shadowRoot);\n                }\n            }\n        }\n        // Capture any observable values that were set by the binding engine before\n        // the browser upgraded the element. Then delete the property since it will\n        // shadow the getter/setter that is required to make the observable operate.\n        // Later, in the connect callback, we'll re-apply the values.\n        const accessors = Observable.getAccessors(element);\n        if (accessors.length > 0) {\n            const boundObservables = (this.boundObservables = Object.create(null));\n            for (let i = 0, ii = accessors.length; i < ii; ++i) {\n                const propertyName = accessors[i].name;\n                const value = element[propertyName];\n                if (value !== void 0) {\n                    delete element[propertyName];\n                    boundObservables[propertyName] = value;\n                }\n            }\n        }\n    }\n    /**\n     * Indicates whether or not the custom element has been\n     * connected to the document.\n     */\n    get isConnected() {\n        Observable.track(this, isConnectedPropertyName);\n        return this.stage === 1 /* Stages.connected */;\n    }\n    /**\n     * The context the expression is evaluated against.\n     */\n    get context() {\n        var _a, _b;\n        return (_b = (_a = this.view) === null || _a === void 0 ? void 0 : _a.context) !== null && _b !== void 0 ? _b : ExecutionContext.default;\n    }\n    /**\n     * Indicates whether the controller is bound.\n     */\n    get isBound() {\n        var _a, _b;\n        return (_b = (_a = this.view) === null || _a === void 0 ? void 0 : _a.isBound) !== null && _b !== void 0 ? _b : false;\n    }\n    /**\n     * Indicates how the source's lifetime relates to the controller's lifetime.\n     */\n    get sourceLifetime() {\n        var _a;\n        return (_a = this.view) === null || _a === void 0 ? void 0 : _a.sourceLifetime;\n    }\n    /**\n     * Gets/sets the template used to render the component.\n     * @remarks\n     * This value can only be accurately read after connect but can be set at any time.\n     */\n    get template() {\n        var _a;\n        // 1. Template overrides take top precedence.\n        if (this._template === null) {\n            const definition = this.definition;\n            if (this.source.resolveTemplate) {\n                // 2. Allow for element instance overrides next.\n                this._template = this.source.resolveTemplate();\n            }\n            else if (definition.template) {\n                // 3. Default to the static definition.\n                this._template = (_a = definition.template) !== null && _a !== void 0 ? _a : null;\n            }\n        }\n        return this._template;\n    }\n    set template(value) {\n        if (this._template === value) {\n            return;\n        }\n        this._template = value;\n        if (!this.needsInitialization) {\n            this.renderTemplate(value);\n        }\n    }\n    /**\n     * The main set of styles used for the component, independent\n     * of any dynamically added styles.\n     */\n    get mainStyles() {\n        var _a;\n        // 1. Styles overrides take top precedence.\n        if (this._mainStyles === null) {\n            const definition = this.definition;\n            if (this.source.resolveStyles) {\n                // 2. Allow for element instance overrides next.\n                this._mainStyles = this.source.resolveStyles();\n            }\n            else if (definition.styles) {\n                // 3. Default to the static definition.\n                this._mainStyles = (_a = definition.styles) !== null && _a !== void 0 ? _a : null;\n            }\n        }\n        return this._mainStyles;\n    }\n    set mainStyles(value) {\n        if (this._mainStyles === value) {\n            return;\n        }\n        if (this._mainStyles !== null) {\n            this.removeStyles(this._mainStyles);\n        }\n        this._mainStyles = value;\n        if (!this.needsInitialization) {\n            this.addStyles(value);\n        }\n    }\n    /**\n     * Registers an unbind handler with the controller.\n     * @param behavior - An object to call when the controller unbinds.\n     */\n    onUnbind(behavior) {\n        var _a;\n        (_a = this.view) === null || _a === void 0 ? void 0 : _a.onUnbind(behavior);\n    }\n    /**\n     * Adds the behavior to the component.\n     * @param behavior - The behavior to add.\n     */\n    addBehavior(behavior) {\n        var _a, _b;\n        const targetBehaviors = (_a = this.behaviors) !== null && _a !== void 0 ? _a : (this.behaviors = new Map());\n        const count = (_b = targetBehaviors.get(behavior)) !== null && _b !== void 0 ? _b : 0;\n        if (count === 0) {\n            targetBehaviors.set(behavior, 1);\n            behavior.addedCallback && behavior.addedCallback(this);\n            if (behavior.connectedCallback &&\n                !this.guardBehaviorConnection &&\n                (this.stage === 1 /* Stages.connected */ || this.stage === 0 /* Stages.connecting */)) {\n                behavior.connectedCallback(this);\n            }\n        }\n        else {\n            targetBehaviors.set(behavior, count + 1);\n        }\n    }\n    /**\n     * Removes the behavior from the component.\n     * @param behavior - The behavior to remove.\n     * @param force - Forces removal even if this behavior was added more than once.\n     */\n    removeBehavior(behavior, force = false) {\n        const targetBehaviors = this.behaviors;\n        if (targetBehaviors === null) {\n            return;\n        }\n        const count = targetBehaviors.get(behavior);\n        if (count === void 0) {\n            return;\n        }\n        if (count === 1 || force) {\n            targetBehaviors.delete(behavior);\n            if (behavior.disconnectedCallback && this.stage !== 3 /* Stages.disconnected */) {\n                behavior.disconnectedCallback(this);\n            }\n            behavior.removedCallback && behavior.removedCallback(this);\n        }\n        else {\n            targetBehaviors.set(behavior, count - 1);\n        }\n    }\n    /**\n     * Adds styles to this element. Providing an HTMLStyleElement will attach the element instance to the shadowRoot.\n     * @param styles - The styles to add.\n     */\n    addStyles(styles) {\n        var _a;\n        if (!styles) {\n            return;\n        }\n        const source = this.source;\n        if (styles instanceof HTMLElement) {\n            const target = (_a = getShadowRoot(source)) !== null && _a !== void 0 ? _a : this.source;\n            target.append(styles);\n        }\n        else if (!styles.isAttachedTo(source)) {\n            const sourceBehaviors = styles.behaviors;\n            styles.addStylesTo(source);\n            if (sourceBehaviors !== null) {\n                for (let i = 0, ii = sourceBehaviors.length; i < ii; ++i) {\n                    this.addBehavior(sourceBehaviors[i]);\n                }\n            }\n        }\n    }\n    /**\n     * Removes styles from this element. Providing an HTMLStyleElement will detach the element instance from the shadowRoot.\n     * @param styles - the styles to remove.\n     */\n    removeStyles(styles) {\n        var _a;\n        if (!styles) {\n            return;\n        }\n        const source = this.source;\n        if (styles instanceof HTMLElement) {\n            const target = (_a = getShadowRoot(source)) !== null && _a !== void 0 ? _a : source;\n            target.removeChild(styles);\n        }\n        else if (styles.isAttachedTo(source)) {\n            const sourceBehaviors = styles.behaviors;\n            styles.removeStylesFrom(source);\n            if (sourceBehaviors !== null) {\n                for (let i = 0, ii = sourceBehaviors.length; i < ii; ++i) {\n                    this.addBehavior(sourceBehaviors[i]);\n                }\n            }\n        }\n    }\n    /**\n     * Runs connected lifecycle behavior on the associated element.\n     */\n    connect() {\n        if (this.stage !== 3 /* Stages.disconnected */) {\n            return;\n        }\n        this.stage = 0 /* Stages.connecting */;\n        // If we have any observables that were bound, re-apply their values.\n        if (this.boundObservables !== null) {\n            const element = this.source;\n            const boundObservables = this.boundObservables;\n            const propertyNames = Object.keys(boundObservables);\n            for (let i = 0, ii = propertyNames.length; i < ii; ++i) {\n                const propertyName = propertyNames[i];\n                element[propertyName] = boundObservables[propertyName];\n            }\n            this.boundObservables = null;\n        }\n        const behaviors = this.behaviors;\n        if (behaviors !== null) {\n            this.guardBehaviorConnection = true;\n            for (const key of behaviors.keys()) {\n                key.connectedCallback && key.connectedCallback(this);\n            }\n            this.guardBehaviorConnection = false;\n        }\n        if (this.needsInitialization) {\n            this.renderTemplate(this.template);\n            this.addStyles(this.mainStyles);\n            this.needsInitialization = false;\n        }\n        else if (this.view !== null) {\n            this.view.bind(this.source);\n        }\n        this.stage = 1 /* Stages.connected */;\n        Observable.notify(this, isConnectedPropertyName);\n    }\n    /**\n     * Runs disconnected lifecycle behavior on the associated element.\n     */\n    disconnect() {\n        if (this.stage !== 1 /* Stages.connected */) {\n            return;\n        }\n        this.stage = 2 /* Stages.disconnecting */;\n        Observable.notify(this, isConnectedPropertyName);\n        if (this.view !== null) {\n            this.view.unbind();\n        }\n        const behaviors = this.behaviors;\n        if (behaviors !== null) {\n            for (const key of behaviors.keys()) {\n                key.disconnectedCallback && key.disconnectedCallback(this);\n            }\n        }\n        this.stage = 3 /* Stages.disconnected */;\n    }\n    /**\n     * Runs the attribute changed callback for the associated element.\n     * @param name - The name of the attribute that changed.\n     * @param oldValue - The previous value of the attribute.\n     * @param newValue - The new value of the attribute.\n     */\n    onAttributeChangedCallback(name, oldValue, newValue) {\n        const attrDef = this.definition.attributeLookup[name];\n        if (attrDef !== void 0) {\n            attrDef.onAttributeChangedCallback(this.source, newValue);\n        }\n    }\n    /**\n     * Emits a custom HTML event.\n     * @param type - The type name of the event.\n     * @param detail - The event detail object to send with the event.\n     * @param options - The event options. By default bubbles and composed.\n     * @remarks\n     * Only emits events if connected.\n     */\n    emit(type, detail, options) {\n        if (this.stage === 1 /* Stages.connected */) {\n            return this.source.dispatchEvent(new CustomEvent(type, Object.assign(Object.assign({ detail }, defaultEventOptions), options)));\n        }\n        return false;\n    }\n    renderTemplate(template) {\n        var _a;\n        // When getting the host to render to, we start by looking\n        // up the shadow root. If there isn't one, then that means\n        // we're doing a Light DOM render to the element's direct children.\n        const element = this.source;\n        const host = (_a = getShadowRoot(element)) !== null && _a !== void 0 ? _a : element;\n        if (this.view !== null) {\n            // If there's already a view, we need to unbind and remove through dispose.\n            this.view.dispose();\n            this.view = null;\n        }\n        else if (!this.needsInitialization || this.hasExistingShadowRoot) {\n            this.hasExistingShadowRoot = false;\n            // If there was previous custom rendering, we need to clear out the host.\n            for (let child = host.firstChild; child !== null; child = host.firstChild) {\n                host.removeChild(child);\n            }\n        }\n        if (template) {\n            // If a new template was provided, render it.\n            this.view = template.render(element, host, element);\n            this.view.sourceLifetime =\n                SourceLifetime.coupled;\n        }\n    }\n    /**\n     * Locates or creates a controller for the specified element.\n     * @param element - The element to return the controller for.\n     * @remarks\n     * The specified element must have a {@link FASTElementDefinition}\n     * registered either through the use of the {@link customElement}\n     * decorator or a call to `FASTElement.define`.\n     */\n    static forCustomElement(element) {\n        const controller = element.$fastController;\n        if (controller !== void 0) {\n            return controller;\n        }\n        const definition = FASTElementDefinition.getForInstance(element);\n        if (definition === void 0) {\n            throw FAST.error(1401 /* Message.missingElementDefinition */);\n        }\n        return (element.$fastController = new elementControllerStrategy(element, definition));\n    }\n    /**\n     * Sets the strategy that ElementController.forCustomElement uses to construct\n     * ElementController instances for an element.\n     * @param strategy - The strategy to use.\n     */\n    static setStrategy(strategy) {\n        elementControllerStrategy = strategy;\n    }\n}\nmakeSerializationNoop(ElementController);\n// Set default strategy for ElementController\nElementController.setStrategy(ElementController);\n/**\n * Converts a styleTarget into the operative target. When the provided target is an Element\n * that is a FASTElement, the function will return the ShadowRoot for that element. Otherwise,\n * it will return the root node for the element.\n * @param target\n * @returns\n */\nfunction normalizeStyleTarget(target) {\n    var _a;\n    if (\"adoptedStyleSheets\" in target) {\n        return target;\n    }\n    else {\n        return ((_a = getShadowRoot(target)) !== null && _a !== void 0 ? _a : target.getRootNode());\n    }\n}\n// Default StyleStrategy implementations are defined in this module because they\n// require access to element shadowRoots, and we don't want to leak shadowRoot\n// objects out of this module.\n/**\n * https://wicg.github.io/construct-stylesheets/\n * https://developers.google.com/web/updates/2019/02/constructable-stylesheets\n *\n * @internal\n */\nexport class AdoptedStyleSheetsStrategy {\n    constructor(styles) {\n        const styleSheetCache = AdoptedStyleSheetsStrategy.styleSheetCache;\n        this.sheets = styles.map((x) => {\n            if (x instanceof CSSStyleSheet) {\n                return x;\n            }\n            let sheet = styleSheetCache.get(x);\n            if (sheet === void 0) {\n                sheet = new CSSStyleSheet();\n                sheet.replaceSync(x);\n                styleSheetCache.set(x, sheet);\n            }\n            return sheet;\n        });\n    }\n    addStylesTo(target) {\n        const t = normalizeStyleTarget(target);\n        t.adoptedStyleSheets = [...t.adoptedStyleSheets, ...this.sheets];\n    }\n    removeStylesFrom(target) {\n        const t = normalizeStyleTarget(target);\n        const sheets = this.sheets;\n        t.adoptedStyleSheets = t.adoptedStyleSheets.filter((x) => sheets.indexOf(x) === -1);\n    }\n}\nAdoptedStyleSheetsStrategy.styleSheetCache = new Map();\nlet id = 0;\nconst nextStyleId = () => `fast-${++id}`;\nfunction usableStyleTarget(target) {\n    return target === document ? document.body : target;\n}\n/**\n * @internal\n */\nexport class StyleElementStrategy {\n    constructor(styles) {\n        this.styles = styles;\n        this.styleClass = nextStyleId();\n    }\n    addStylesTo(target) {\n        target = usableStyleTarget(normalizeStyleTarget(target));\n        const styles = this.styles;\n        const styleClass = this.styleClass;\n        for (let i = 0; i < styles.length; i++) {\n            const element = document.createElement(\"style\");\n            element.innerHTML = styles[i];\n            element.className = styleClass;\n            target.append(element);\n        }\n    }\n    removeStylesFrom(target) {\n        target = usableStyleTarget(normalizeStyleTarget(target));\n        const styles = target.querySelectorAll(`.${this.styleClass}`);\n        for (let i = 0, ii = styles.length; i < ii; ++i) {\n            target.removeChild(styles[i]);\n        }\n    }\n}\nElementStyles.setDefaultStrategy(ElementStyles.supportsAdoptedStyleSheets\n    ? AdoptedStyleSheetsStrategy\n    : StyleElementStrategy);\n","import { isFunction } from \"../interfaces.js\";\nimport { ElementController } from \"./element-controller.js\";\nimport { FASTElementDefinition, } from \"./fast-definitions.js\";\n/* eslint-disable-next-line @typescript-eslint/explicit-function-return-type */\nfunction createFASTElement(BaseType) {\n    const type = class extends BaseType {\n        constructor() {\n            /* eslint-disable-next-line */\n            super();\n            ElementController.forCustomElement(this);\n        }\n        $emit(type, detail, options) {\n            return this.$fastController.emit(type, detail, options);\n        }\n        connectedCallback() {\n            this.$fastController.connect();\n        }\n        disconnectedCallback() {\n            this.$fastController.disconnect();\n        }\n        attributeChangedCallback(name, oldValue, newValue) {\n            this.$fastController.onAttributeChangedCallback(name, oldValue, newValue);\n        }\n    };\n    FASTElementDefinition.registerBaseType(type);\n    return type;\n}\nfunction compose(type, nameOrDef) {\n    if (isFunction(type)) {\n        return FASTElementDefinition.compose(type, nameOrDef);\n    }\n    return FASTElementDefinition.compose(this, type);\n}\nfunction define(type, nameOrDef) {\n    if (isFunction(type)) {\n        return FASTElementDefinition.compose(type, nameOrDef).define().type;\n    }\n    return FASTElementDefinition.compose(this, type).define().type;\n}\nfunction from(BaseType) {\n    return createFASTElement(BaseType);\n}\n/**\n * A minimal base class for FASTElements that also provides\n * static helpers for working with FASTElements.\n * @public\n */\nexport const FASTElement = Object.assign(createFASTElement(HTMLElement), {\n    /**\n     * Creates a new FASTElement base class inherited from the\n     * provided base type.\n     * @param BaseType - The base element type to inherit from.\n     */\n    from,\n    /**\n     * Defines a platform custom element based on the provided type and definition.\n     * @param type - The custom element type to define.\n     * @param nameOrDef - The name of the element to define or a definition object\n     * that describes the element to define.\n     */\n    define,\n    /**\n     * Defines metadata for a FASTElement which can be used to later define the element.\n     * @public\n     */\n    compose,\n});\n/**\n * Decorator: Defines a platform custom element based on `FASTElement`.\n * @param nameOrDef - The name of the element to define or a definition object\n * that describes the element to define.\n * @public\n */\nexport function customElement(nameOrDef) {\n    /* eslint-disable-next-line @typescript-eslint/explicit-function-return-type */\n    return function (type) {\n        define(type, nameOrDef);\n    };\n}\n","import { InlineTemplateDirective, } from \"@microsoft/fast-element\";\n/**\n * A function to compose template options.\n * @public\n */\nexport function staticallyCompose(item) {\n    if (!item) {\n        return InlineTemplateDirective.empty;\n    }\n    if (typeof item === \"string\") {\n        return new InlineTemplateDirective(item);\n    }\n    if (\"inline\" in item) {\n        return item.inline();\n    }\n    return item;\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.push(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.push(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","import { __decorate } from \"tslib\";\nimport { attr } from \"@microsoft/fast-element\";\n/**\n * Some states and properties are applicable to all host language elements regardless of whether a role is applied.\n * The following global states and properties are supported by all roles and by all base markup elements.\n * {@link https://www.w3.org/TR/wai-aria-1.1/#global_states}\n *\n * This is intended to be used as a mixin. Be sure you extend FASTElement.\n *\n * @public\n */\nexport class ARIAGlobalStatesAndProperties {\n}\n__decorate([\n    attr({ attribute: \"aria-atomic\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaAtomic\", void 0);\n__decorate([\n    attr({ attribute: \"aria-busy\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaBusy\", void 0);\n__decorate([\n    attr({ attribute: \"aria-controls\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaControls\", void 0);\n__decorate([\n    attr({ attribute: \"aria-current\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaCurrent\", void 0);\n__decorate([\n    attr({ attribute: \"aria-describedby\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaDescribedby\", void 0);\n__decorate([\n    attr({ attribute: \"aria-details\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaDetails\", void 0);\n__decorate([\n    attr({ attribute: \"aria-disabled\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaDisabled\", void 0);\n__decorate([\n    attr({ attribute: \"aria-errormessage\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaErrormessage\", void 0);\n__decorate([\n    attr({ attribute: \"aria-flowto\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaFlowto\", void 0);\n__decorate([\n    attr({ attribute: \"aria-haspopup\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaHaspopup\", void 0);\n__decorate([\n    attr({ attribute: \"aria-hidden\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaHidden\", void 0);\n__decorate([\n    attr({ attribute: \"aria-invalid\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaInvalid\", void 0);\n__decorate([\n    attr({ attribute: \"aria-keyshortcuts\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaKeyshortcuts\", void 0);\n__decorate([\n    attr({ attribute: \"aria-label\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaLabel\", void 0);\n__decorate([\n    attr({ attribute: \"aria-labelledby\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaLabelledby\", void 0);\n__decorate([\n    attr({ attribute: \"aria-live\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaLive\", void 0);\n__decorate([\n    attr({ attribute: \"aria-owns\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaOwns\", void 0);\n__decorate([\n    attr({ attribute: \"aria-relevant\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaRelevant\", void 0);\n__decorate([\n    attr({ attribute: \"aria-roledescription\" })\n], ARIAGlobalStatesAndProperties.prototype, \"ariaRoledescription\", void 0);\n","import { html, ref } from \"@microsoft/fast-element\";\nimport { staticallyCompose, } from \"../utilities/template-helpers.js\";\n/**\n * A mixin class implementing start and end slots.\n * These are generally used to decorate text elements with icons or other visual indicators.\n * @public\n */\nexport class StartEnd {\n}\n/**\n * The template for the end slot.\n * For use with {@link StartEnd}\n *\n * @public\n */\nexport function endSlotTemplate(options) {\n    return html `\n        <slot name=\"end\" ${ref(\"end\")}>${staticallyCompose(options.end)}</slot>\n    `.inline();\n}\n/**\n * The template for the start slots.\n * For use with {@link StartEnd}\n *\n * @public\n */\nexport function startSlotTemplate(options) {\n    return html `\n        <slot name=\"start\" ${ref(\"start\")}>${staticallyCompose(options.start)}</slot>\n    `.inline();\n}\n","/**\n * String values for use with KeyboardEvent.key\n */\nexport const keyAlt = \"Alt\";\nexport const keyAltGraph = \"AltGraph\";\nexport const keyCapsLock = \"CapsLock\";\nexport const keyControl = \"Control\";\nexport const keyArrowDown = \"ArrowDown\";\nexport const keyArrowLeft = \"ArrowLeft\";\nexport const keyArrowRight = \"ArrowRight\";\nexport const keyArrowUp = \"ArrowUp\";\nexport const keyBackspace = \"Backspace\";\nexport const keyDelete = \"Delete\";\nexport const keyEnd = \"End\";\nexport const keyEnter = \"Enter\";\nexport const keyEscape = \"Escape\";\nexport const keyHome = \"Home\";\nexport const keyFunction = \"Fn\";\nexport const keyFunctionLock = \"FnLock\";\nexport const keyFunction2 = \"F2\";\nexport const keyFunction3 = \"F3\";\nexport const keyFunction4 = \"F4\";\nexport const keyFunction5 = \"F5\";\nexport const keyFunction6 = \"F6\";\nexport const keyFunction7 = \"F7\";\nexport const keyFunction8 = \"F8\";\nexport const keyFunction9 = \"F9\";\nexport const keyFunction10 = \"F10\";\nexport const keyFunction11 = \"F11\";\nexport const keyFunction12 = \"F12\";\nexport const keyFunction13 = \"F13\";\nexport const keyFunction14 = \"F14\";\nexport const keyFunction15 = \"F15\";\nexport const keyNumLock = \"NumLock\";\nexport const keyPageDown = \"PageDown\";\nexport const keyPageUp = \"PageUp\";\nexport const keyScrollLock = \"ScrollLock\";\nexport const keyShift = \"Shift\";\nexport const keySpace = \" \";\nexport const keyTab = \"Tab\";\nexport const ArrowKeys = {\n    ArrowDown: keyArrowDown,\n    ArrowLeft: keyArrowLeft,\n    ArrowRight: keyArrowRight,\n    ArrowUp: keyArrowUp,\n};\n","import { AttributeConfiguration } from \"@microsoft/fast-element\";\n/**\n * Apply mixins to a constructor.\n * Sourced from {@link https://www.typescriptlang.org/docs/handbook/mixins.html | TypeScript Documentation }.\n * @public\n */\nexport function applyMixins(derivedCtor, ...baseCtors) {\n    const derivedAttributes = AttributeConfiguration.locate(derivedCtor);\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            if (name !== \"constructor\") {\n                Object.defineProperty(derivedCtor.prototype, name, \n                /* eslint-disable-next-line @typescript-eslint/no-non-null-assertion */\n                Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n        const baseAttributes = AttributeConfiguration.locate(baseCtor);\n        baseAttributes.forEach(x => derivedAttributes.push(x));\n    });\n}\n","import { attr, booleanConverter, emptyArray, observable, Updates, } from \"@microsoft/fast-element\";\nimport { keyEnter } from \"@microsoft/fast-web-utilities\";\nconst proxySlotName = \"form-associated-proxy\";\nconst ElementInternalsKey = \"ElementInternals\";\n/**\n * @alpha\n */\nexport const supportsElementInternals = ElementInternalsKey in window &&\n    \"setFormValue\" in window[ElementInternalsKey].prototype;\nconst InternalsMap = new WeakMap();\n/**\n * Base function for providing Custom Element Form Association.\n *\n * @beta\n */\nexport function FormAssociated(BaseCtor) {\n    const C = class extends BaseCtor {\n        constructor(...args) {\n            super(...args);\n            /**\n             * Track whether the value has been changed from the initial value\n             */\n            this.dirtyValue = false;\n            /**\n             * Sets the element's disabled state. A disabled element will not be included during form submission.\n             *\n             * @remarks\n             * HTML Attribute: disabled\n             */\n            this.disabled = false;\n            /**\n             * These are events that are still fired by the proxy\n             * element based on user / programmatic interaction.\n             *\n             * The proxy implementation should be transparent to\n             * the app author, so block these events from emitting.\n             */\n            this.proxyEventsToBlock = [\"change\", \"click\"];\n            this.proxyInitialized = false;\n            this.required = false;\n            this.initialValue = this.initialValue || \"\";\n            if (!this.elementInternals) {\n                // When elementInternals is not supported, formResetCallback is\n                // bound to an event listener, so ensure the handler's `this`\n                // context is correct.\n                this.formResetCallback = this.formResetCallback.bind(this);\n            }\n        }\n        /**\n         * Must evaluate to true to enable elementInternals.\n         * Feature detects API support and resolve respectively\n         *\n         * @internal\n         */\n        static get formAssociated() {\n            return supportsElementInternals;\n        }\n        /**\n         * Returns the validity state of the element\n         *\n         * @beta\n         */\n        get validity() {\n            return this.elementInternals\n                ? this.elementInternals.validity\n                : this.proxy.validity;\n        }\n        /**\n         * Retrieve a reference to the associated form.\n         * Returns null if not associated to any form.\n         *\n         * @beta\n         */\n        get form() {\n            return this.elementInternals ? this.elementInternals.form : this.proxy.form;\n        }\n        /**\n         * Retrieve the localized validation message,\n         * or custom validation message if set.\n         *\n         * @beta\n         */\n        get validationMessage() {\n            return this.elementInternals\n                ? this.elementInternals.validationMessage\n                : this.proxy.validationMessage;\n        }\n        /**\n         * Whether the element will be validated when the\n         * form is submitted\n         */\n        get willValidate() {\n            return this.elementInternals\n                ? this.elementInternals.willValidate\n                : this.proxy.willValidate;\n        }\n        /**\n         * A reference to all associated label elements\n         */\n        get labels() {\n            if (this.elementInternals) {\n                return Object.freeze(Array.from(this.elementInternals.labels));\n            }\n            else if (this.proxy instanceof HTMLElement &&\n                this.proxy.ownerDocument &&\n                this.id) {\n                // Labels associated by wrapping the element: <label><custom-element></custom-element></label>\n                const parentLabels = this.proxy.labels;\n                // Labels associated using the `for` attribute\n                const forLabels = Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`));\n                const labels = parentLabels\n                    ? forLabels.concat(Array.from(parentLabels))\n                    : forLabels;\n                return Object.freeze(labels);\n            }\n            else {\n                return emptyArray;\n            }\n        }\n        /**\n         * Invoked when the `value` property changes\n         * @param previous - the previous value\n         * @param next - the new value\n         *\n         * @remarks\n         * If elements extending `FormAssociated` implement a `valueChanged` method\n         * They must be sure to invoke `super.valueChanged(previous, next)` to ensure\n         * proper functioning of `FormAssociated`\n         */\n        valueChanged(previous, next) {\n            this.dirtyValue = true;\n            if (this.proxy instanceof HTMLElement) {\n                this.proxy.value = this.value;\n            }\n            this.currentValue = this.value;\n            this.setFormValue(this.value);\n            this.validate();\n        }\n        currentValueChanged() {\n            this.value = this.currentValue;\n        }\n        /**\n         * Invoked when the `initialValue` property changes\n         *\n         * @param previous - the previous value\n         * @param next - the new value\n         *\n         * @remarks\n         * If elements extending `FormAssociated` implement a `initialValueChanged` method\n         * They must be sure to invoke `super.initialValueChanged(previous, next)` to ensure\n         * proper functioning of `FormAssociated`\n         */\n        initialValueChanged(previous, next) {\n            // If the value is clean and the component is connected to the DOM\n            // then set value equal to the attribute value.\n            if (!this.dirtyValue) {\n                this.value = this.initialValue;\n                this.dirtyValue = false;\n            }\n        }\n        /**\n         * Invoked when the `disabled` property changes\n         *\n         * @param previous - the previous value\n         * @param next - the new value\n         *\n         * @remarks\n         * If elements extending `FormAssociated` implement a `disabledChanged` method\n         * They must be sure to invoke `super.disabledChanged(previous, next)` to ensure\n         * proper functioning of `FormAssociated`\n         */\n        disabledChanged(previous, next) {\n            if (this.proxy instanceof HTMLElement) {\n                this.proxy.disabled = this.disabled;\n            }\n            Updates.enqueue(() => this.classList.toggle(\"disabled\", this.disabled));\n        }\n        /**\n         * Invoked when the `name` property changes\n         *\n         * @param previous - the previous value\n         * @param next - the new value\n         *\n         * @remarks\n         * If elements extending `FormAssociated` implement a `nameChanged` method\n         * They must be sure to invoke `super.nameChanged(previous, next)` to ensure\n         * proper functioning of `FormAssociated`\n         */\n        nameChanged(previous, next) {\n            if (this.proxy instanceof HTMLElement) {\n                this.proxy.name = this.name;\n            }\n        }\n        /**\n         * Invoked when the `required` property changes\n         *\n         * @param previous - the previous value\n         * @param next - the new value\n         *\n         * @remarks\n         * If elements extending `FormAssociated` implement a `requiredChanged` method\n         * They must be sure to invoke `super.requiredChanged(previous, next)` to ensure\n         * proper functioning of `FormAssociated`\n         */\n        requiredChanged(prev, next) {\n            if (this.proxy instanceof HTMLElement) {\n                this.proxy.required = this.required;\n            }\n            Updates.enqueue(() => this.classList.toggle(\"required\", this.required));\n            this.validate();\n        }\n        /**\n         * The element internals object. Will only exist\n         * in browsers supporting the attachInternals API\n         */\n        get elementInternals() {\n            if (!supportsElementInternals) {\n                return null;\n            }\n            let internals = InternalsMap.get(this);\n            if (!internals) {\n                internals = this.attachInternals();\n                InternalsMap.set(this, internals);\n            }\n            return internals;\n        }\n        /**\n         * @internal\n         */\n        connectedCallback() {\n            super.connectedCallback();\n            this.addEventListener(\"keypress\", this._keypressHandler);\n            if (!this.value) {\n                this.value = this.initialValue;\n                this.dirtyValue = false;\n            }\n            if (!this.elementInternals) {\n                this.attachProxy();\n                if (this.form) {\n                    this.form.addEventListener(\"reset\", this.formResetCallback);\n                }\n            }\n        }\n        /**\n         * @internal\n         */\n        disconnectedCallback() {\n            this.proxyEventsToBlock.forEach(name => this.proxy.removeEventListener(name, this.stopPropagation));\n            if (!this.elementInternals && this.form) {\n                this.form.removeEventListener(\"reset\", this.formResetCallback);\n            }\n        }\n        /**\n         * Return the current validity of the element.\n         */\n        checkValidity() {\n            return this.elementInternals\n                ? this.elementInternals.checkValidity()\n                : this.proxy.checkValidity();\n        }\n        /**\n         * Return the current validity of the element.\n         * If false, fires an invalid event at the element.\n         */\n        reportValidity() {\n            return this.elementInternals\n                ? this.elementInternals.reportValidity()\n                : this.proxy.reportValidity();\n        }\n        /**\n         * Set the validity of the control. In cases when the elementInternals object is not\n         * available (and the proxy element is used to report validity), this function will\n         * do nothing unless a message is provided, at which point the setCustomValidity method\n         * of the proxy element will be invoked with the provided message.\n         * @param flags - Validity flags\n         * @param message - Optional message to supply\n         * @param anchor - Optional element used by UA to display an interactive validation UI\n         */\n        setValidity(flags, message, anchor) {\n            if (this.elementInternals) {\n                this.elementInternals.setValidity(flags, message, anchor);\n            }\n            else if (typeof message === \"string\") {\n                this.proxy.setCustomValidity(message);\n            }\n        }\n        /**\n         * Invoked when a connected component's form or fieldset has its disabled\n         * state changed.\n         * @param disabled - the disabled value of the form / fieldset\n         */\n        formDisabledCallback(disabled) {\n            this.disabled = disabled;\n        }\n        formResetCallback() {\n            this.value = this.initialValue;\n            this.dirtyValue = false;\n        }\n        /**\n         * Attach the proxy element to the DOM\n         */\n        attachProxy() {\n            var _a;\n            if (!this.proxyInitialized) {\n                this.proxyInitialized = true;\n                this.proxy.style.display = \"none\";\n                this.proxyEventsToBlock.forEach(name => this.proxy.addEventListener(name, this.stopPropagation));\n                // These are typically mapped to the proxy during\n                // property change callbacks, but during initialization\n                // on the initial call of the callback, the proxy is\n                // still undefined. We should find a better way to address this.\n                this.proxy.disabled = this.disabled;\n                this.proxy.required = this.required;\n                if (typeof this.name === \"string\") {\n                    this.proxy.name = this.name;\n                }\n                if (typeof this.value === \"string\") {\n                    this.proxy.value = this.value;\n                }\n                this.proxy.setAttribute(\"slot\", proxySlotName);\n                this.proxySlot = document.createElement(\"slot\");\n                this.proxySlot.setAttribute(\"name\", proxySlotName);\n            }\n            (_a = this.shadowRoot) === null || _a === void 0 ? void 0 : _a.appendChild(this.proxySlot);\n            this.appendChild(this.proxy);\n        }\n        /**\n         * Detach the proxy element from the DOM\n         */\n        detachProxy() {\n            var _a;\n            this.removeChild(this.proxy);\n            (_a = this.shadowRoot) === null || _a === void 0 ? void 0 : _a.removeChild(this.proxySlot);\n        }\n        /** {@inheritDoc (FormAssociated:interface).validate} */\n        validate(anchor) {\n            if (this.proxy instanceof HTMLElement) {\n                this.setValidity(this.proxy.validity, this.proxy.validationMessage, anchor);\n            }\n        }\n        /**\n         * Associates the provided value (and optional state) with the parent form.\n         * @param value - The value to set\n         * @param state - The state object provided to during session restores and when autofilling.\n         */\n        setFormValue(value, state) {\n            if (this.elementInternals) {\n                this.elementInternals.setFormValue(value, state || value);\n            }\n        }\n        _keypressHandler(e) {\n            switch (e.key) {\n                case keyEnter:\n                    if (this.form instanceof HTMLFormElement) {\n                        // Implicit submission\n                        const defaultButton = this.form.querySelector(\"[type=submit]\");\n                        defaultButton === null || defaultButton === void 0 ? void 0 : defaultButton.click();\n                    }\n                    break;\n            }\n        }\n        /**\n         * Used to stop propagation of proxy element events\n         * @param e - Event object\n         */\n        stopPropagation(e) {\n            e.stopPropagation();\n        }\n    };\n    attr({ mode: \"boolean\" })(C.prototype, \"disabled\");\n    attr({ mode: \"fromView\", attribute: \"value\" })(C.prototype, \"initialValue\");\n    attr({ attribute: \"current-value\" })(C.prototype, \"currentValue\");\n    attr(C.prototype, \"name\");\n    attr({ mode: \"boolean\" })(C.prototype, \"required\");\n    observable(C.prototype, \"value\");\n    return C;\n}\n/**\n * Creates a checkable form associated component.\n * @beta\n */\nexport function CheckableFormAssociated(BaseCtor) {\n    class C extends FormAssociated(BaseCtor) {\n    }\n    class D extends C {\n        constructor(...args) {\n            super(args);\n            /**\n             * Tracks whether the \"checked\" property has been changed.\n             * This is necessary to provide consistent behavior with\n             * normal input checkboxes\n             */\n            this.dirtyChecked = false;\n            /**\n             * Provides the default checkedness of the input element\n             * Passed down to proxy\n             *\n             * @public\n             * @remarks\n             * HTML Attribute: checked\n             */\n            this.checkedAttribute = false;\n            /**\n             * The checked state of the control.\n             *\n             * @public\n             */\n            this.checked = false;\n            // Re-initialize dirtyChecked because initialization of other values\n            // causes it to become true\n            this.dirtyChecked = false;\n        }\n        checkedAttributeChanged() {\n            this.defaultChecked = this.checkedAttribute;\n        }\n        /**\n         * @internal\n         */\n        defaultCheckedChanged() {\n            if (!this.dirtyChecked) {\n                // Setting this.checked will cause us to enter a dirty state,\n                // but if we are clean when defaultChecked is changed, we want to stay\n                // in a clean state, so reset this.dirtyChecked\n                this.checked = this.defaultChecked;\n                this.dirtyChecked = false;\n            }\n        }\n        checkedChanged(prev, next) {\n            if (!this.dirtyChecked) {\n                this.dirtyChecked = true;\n            }\n            this.currentChecked = this.checked;\n            this.updateForm();\n            if (this.proxy instanceof HTMLInputElement) {\n                this.proxy.checked = this.checked;\n            }\n            if (prev !== undefined) {\n                this.$emit(\"change\");\n            }\n            this.validate();\n        }\n        currentCheckedChanged(prev, next) {\n            this.checked = this.currentChecked;\n        }\n        updateForm() {\n            const value = this.checked ? this.value : null;\n            this.setFormValue(value, value);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.updateForm();\n        }\n        formResetCallback() {\n            super.formResetCallback();\n            this.checked = !!this.checkedAttribute;\n            this.dirtyChecked = false;\n        }\n    }\n    attr({ attribute: \"checked\", mode: \"boolean\" })(D.prototype, \"checkedAttribute\");\n    attr({ attribute: \"current-checked\", converter: booleanConverter })(D.prototype, \"currentChecked\");\n    observable(D.prototype, \"defaultChecked\");\n    observable(D.prototype, \"checked\");\n    return D;\n}\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\ntry {\n\tnull.error; // eslint-disable-line no-unused-expressions\n} catch (e) {\n\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\tvar errorProto = getProto(getProto(e));\n\tINTRINSICS['%Error.prototype%'] = errorProto;\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n * This function traverses the list returning the node corresponding to the\n * given key.\n *\n * That node is also moved to the head of the list, so that if it's accessed\n * again we don't need to traverse the whole list. By doing so, all the recently\n * used nodes can be accessed relatively quickly.\n */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\tfor (var prev = list, curr; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\tcurr.next = list.next;\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = { // eslint-disable-line no-param-reassign\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t};\n\t}\n};\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\nmodule.exports = function getSideChannel() {\n\tvar $wm;\n\tvar $m;\n\tvar $o;\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Initialize the linked list as an empty node, so that we don't have\n\t\t\t\t\t * to special-case handling of the first node: we can always refer to\n\t\t\t\t\t * it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t */\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        /* eslint operator-linebreak: [2, \"before\"] */\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","import { html, FASTElement, ViewTemplate } from '@microsoft/fast-element';\nimport type {\n  AnnotatedStoryFn,\n  Args,\n  ComponentAnnotations,\n  StoryAnnotations,\n  Renderer,\n} from '@storybook/types';\nimport qs from 'qs';\nimport type { HtmlRenderer, StoryObj as SbStoryObj } from '@storybook/html';\n/**\n * Returns a formatted URL for a given Storybook fixture.\n *\n * @param id - the Storybook fixture ID\n * @param args - Story args\n * @returns - the local URL for the Storybook fixture iframe\n */\nexport function fixtureURL(\n  id: string = 'debug--blank',\n  args?: Record<string, any>\n): string {\n  const params: Record<string, any> = { id };\n  if (args) {\n    params.args = qs\n      .stringify(args, {\n        allowDots: true,\n        delimiter: ';',\n        format: 'RFC1738',\n        encode: false,\n      })\n      .replace(/=/g, ':')\n      .replace(/\\//g, '--');\n  }\n\n  const url = qs.stringify(params, {\n    addQueryPrefix: true,\n    format: 'RFC1738',\n    encode: false,\n  });\n\n  return url;\n}\n\n/**\n * A helper that returns a function to bind a Storybook story to a ViewTemplate.\n */\nexport type FASTFramework = {\n  component: typeof FASTElement | HtmlRenderer['component'];\n  storyResult:\n  | FASTElement\n  | Element\n  | DocumentFragment\n  | HtmlRenderer['storyResult'];\n  canvasElement: Renderer['canvasElement'] | HTMLCanvasElement;\n};\n\n/**\n * Metadata to configure the stories for a component.\n */\nexport type Meta<TArgs = Args> = ComponentAnnotations<\n  FASTFramework,\n  Omit<TArgs, keyof FASTElement>\n>;\n\n/**\n * Story function that represents a CSFv3 component example.\n */\nexport declare type StoryObj<TArgs = Args> = StoryAnnotations<\n  FASTFramework,\n  TArgs\n> &\n  SbStoryObj;\n\n/**\n * Story function that represents a CSFv2 component example.\n */\nexport declare type StoryFn<TArgs = Args> = AnnotatedStoryFn<\n  FASTFramework,\n  TArgs\n>;\n\n/**\n * Story function that represents a CSFv2 component example.\n *\n * NOTE that in Storybook 7.0, this type will be renamed to `StoryFn` and replaced by the current `StoryObj` type.\n */\nexport declare type Story<TArgs = Args> = StoryObj<TArgs>;\n\n/**\n * Combined Storybook story args.\n */\nexport type StoryArgs<TArgs = Args> = Partial<Omit<TArgs, keyof FASTElement>>;\n\n/** Rendering functions below from nimble team\n * source: https://github.com/ni/nimble/blob/main/packages/nimble-components/src/utilities/tests/storybook.ts */\n\n/**\n * Renders a ViewTemplate as elements in a DocumentFragment.\n * Bindings, such as event binding, will be active.\n */\nconst renderViewTemplate = <TSource>(\n  viewTemplate: ViewTemplate<TSource>,\n  source: TSource\n): DocumentFragment => {\n  const template = document.createElement('template');\n  const fragment = template.content;\n  viewTemplate.render(source, fragment);\n  return fragment;\n};\n\n/**\n *  Renders a FAST `html` template as a story. \n */\nexport const createStory = <TSource>(\n  viewTemplate: ViewTemplate<TSource>\n): ((source: TSource) => Element) => {\n  return (source: TSource): Element => {\n    const wrappedViewTemplate = html<TSource>`\n            <div class=\"code-hide-top-container\">${viewTemplate}</div>\n        `;\n    const fragment = renderViewTemplate(wrappedViewTemplate, source);\n    const content = fragment.firstElementChild!;\n    return content;\n  };\n};\n"],"names":["kernelMode","kernelAttr","scripts","KernelServiceId","postfix","isFunction","object","isString","noop","global","result","propConfig","FAST","storage","id","initialize","found","code","emptyArray","createTypeRegistry","typeToDefinition","definition","key","createMetadataLocator","metadataLookup","target","metadata","currentTarget","makeSerializationNoop","type","DOMAspect","createHTML","html","fastTrustedType","defaultPolicy","value","tagName","aspect","aspectName","sink","fastPolicy","DOM","element","attributeName","Updates","tasks","pendingErrors","rAF","updateAsync","throwFirstError","tryRunTask","task","error","process","index","scan","newLength","enqueue","callable","isAsync","SubscriberSet","subject","initialSubscriber","subscriber","spillover","args","sub1","sub2","i","ii","PropertyChangeNotifier","propertyName","_a","_b","propertyToWatch","subscribers","propertyToUnwatch","SourceLifetime","Observable","queueUpdate","volatileRegex","notifierLookup","watcher","createArrayObserver","array","getNotifier","source","getAccessors","DefaultObservableAccessor","name","newValue","field","oldValue","callback","ExpressionNotifierImplementation","expression","isVolatileBinding","controller","context","previousWatcher","current","propertySource","prev","notifier","prevValue","next","factory","nameOrAccessor","observable","contextEvent","event","ExecutionContext","Binding","evaluate","policy","isVolatile","OneWayBinding","oneWay","OneTimeBinding","oneTime","DefaultStyleStrategy","reduceStyles","styles","x","ElementStyles","curr","behaviors","Strategy","marker","interpolationStart","interpolationEnd","interpolationEndLength","nextId","Markup","Parser","factories","parts","literal","factoryId","registry","HTMLDirective","options","directive","StatelessAttachedAttributeDirective","add","updateContent","view","updateTokenList","lookup","state","classVersions","version","tokenList","names","currentName","sinkLookup","t","a","v","HTMLBindingDirective","dataBinding","observer","binding","removeNodeSequence","firstNode","lastNode","parent","HTMLView","fragment","targets","node","end","parentNode","behavior","unbindables","views","targetIdFrom","parentId","nodeIndex","descriptorCache","tryWarn","warningHost","property","CompilationContext","directives","nodeId","targetIndex","targetId","descriptors","grandparentId","childIndex","descriptor","hostBindingTarget","compileAttributes","includeBasicValues","attributes","attr","attrValue","parseResult","Compiler","compileContent","currentNode","currentPart","compileChildren","childNode","compileNode","isMarker","templateTag","template","fec","strategy","sourceAspect","bindingPolicy","partCount","finalParts","scope","output","lastAttributeNameRegex","noFactories","InlineTemplateDirective","prevString","match","ViewTemplate","host","strings","values","currentString","currentValue","staticValue","RefDirective","ref","NodeObservationDirective","nodes","slotEvent","SlottedDirective","slotted","propertyOrOptions","booleanMode","reflectMode","AttributeConfiguration","booleanConverter","toNumber","number","nullableNumberConverter","AttributeDefinition","Owner","attribute","mode","converter","guards","latestValue","attributeLists","list","j","jj","config","configOrTarget","prop","decorator","$target","$prop","defaultShadowOptions","defaultElementOptions","fastElementBaseTypes","fastElementRegistry","FASTElementDefinition","nameOrConfig","proto","observedAttributes","propertyLookup","attributeLookup","nameOrDef","defaultEventOptions","isConnectedPropertyName","shadowRoots","getShadowRoot","elementControllerStrategy","ElementController","shadowOptions","shadowRoot","accessors","boundObservables","targetBehaviors","count","force","sourceBehaviors","propertyNames","attrDef","detail","child","normalizeStyleTarget","AdoptedStyleSheetsStrategy","styleSheetCache","sheet","sheets","nextStyleId","usableStyleTarget","StyleElementStrategy","styleClass","createFASTElement","BaseType","compose","define","from","FASTElement","staticallyCompose","item","__decorate","decorators","desc","c","r","d","ARIAGlobalStatesAndProperties","StartEnd","endSlotTemplate","startSlotTemplate","keyEnter","applyMixins","derivedCtor","baseCtors","derivedAttributes","baseCtor","proxySlotName","ElementInternalsKey","supportsElementInternals","InternalsMap","FormAssociated","BaseCtor","C","parentLabels","forLabels","labels","previous","internals","flags","message","anchor","disabled","defaultButton","shams","obj","sym","symObj","symVal","syms","origSymbol","hasSymbolSham","require$$0","hasSymbols","ERROR_MESSAGE","slice","toStr","funcType","implementation","that","bound","binder","boundLength","boundArgs","Empty","functionBind","bind","src","undefined","$SyntaxError","$Function","$TypeError","getEvalledConstructor","expressionSyntax","$gOPD","throwTypeError","ThrowTypeError","getProto","needsEval","TypedArray","INTRINSICS","e","errorProto","doEval","fn","gen","LEGACY_ALIASES","require$$1","hasOwn","require$$2","$concat","$spliceApply","$replace","$strSlice","$exec","rePropName","reEscapeChar","stringToPath","string","first","last","quote","subString","getBaseIntrinsic","allowMissing","intrinsicName","alias","getIntrinsic","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","isOwn","part","GetIntrinsic","$apply","$call","$reflectApply","$defineProperty","$max","module","originalFunction","func","applyBind","callBind","$indexOf","callBound","renderViewTemplate","viewTemplate","createStory","wrappedViewTemplate"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]}